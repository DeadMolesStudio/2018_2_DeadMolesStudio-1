/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./public/app/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./public/app/components/About/About.mjs":
/*!***********************************************!*\
  !*** ./public/app/components/About/About.mjs ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(__webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return AboutComponent; });\nconst rules = [\n    'Передвигая героя влево и вправо, вам необходимо собирать продукты, которые указаны в списке продуктов, за них вам будет начиляться по 3 очка',\n    'За предметы, которые не входят в ваш список покупок у вас будет отниматься по 1 очку.',\n    'Управление:',\n    'Влево: <- или A',\n    'Вправо: -> или D',\n];\n\nclass AboutComponent {\n    constructor({ el = document.body, data = rules } = {}) {\n        this._el = el;\n        this._data = data;\n    }\n\n    render() {\n        this._el.insertAdjacentHTML(\n            'afterbegin',\n            `\n            <div class=\"rules\">\n                <h2>Как играть?</h2>\n            </div>\n            `.trim()\n        );\n\n        const rulesList = this._el.querySelector('.rules');\n        if (this._data !== null) {\n            this._data.forEach( (item) => {\n                const ruleNode = `<p>${item}</p>`;\n                rulesList.innerHTML += ruleNode;\n            });\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/components/About/About.mjs?");

/***/ }),

/***/ "./public/app/components/Button/Button.mjs":
/*!*************************************************!*\
  !*** ./public/app/components/Button/Button.mjs ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(__webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ButtonComponent; });\n/* harmony import */ var _modules_Utils_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../modules/Utils.mjs */ \"./public/app/modules/Utils.mjs\");\n\n\nclass ButtonComponent {\n    constructor({\n        el = document.body, href = '/', text = 'Назад', className = 'cute-btn cute-btn--w10rem',\n    } = {}) {\n        this._el = el;\n        this._href = href;\n        this._text = text;\n        this._innerElem = null;\n        this._listenersToAdd = [];\n        this._className = className;\n    }\n\n    get href() {\n        return this._href;\n    }\n\n    set href(href) {\n        this._href = href;\n    }\n\n    render() {\n        this._innerElem = Object(_modules_Utils_mjs__WEBPACK_IMPORTED_MODULE_0__[\"createElementFromHTML\"])(`\n        <a href=\"${this._href}\" class=\"${this._className}\" data-href=\"${this._href}\">\n            ${this._text}\n        </a>\n        `);\n        this._el.appendChild(this._innerElem);\n        this._listenersToAdd.forEach( (entry) => {\n            this.on(entry);\n        });\n        this._listenersToAdd = [];\n    }\n\n\n    on({ event = 'click', callback = _modules_Utils_mjs__WEBPACK_IMPORTED_MODULE_0__[\"noop\"], capture = false }) {\n        if (this._innerElem !== null) {\n            this._innerElem.addEventListener(event, callback, capture);\n        } else {\n            this._listenersToAdd.push({ event, callback, capture });\n        }\n    }\n\n    off({ event = 'click', callback = _modules_Utils_mjs__WEBPACK_IMPORTED_MODULE_0__[\"noop\"], capture = false }) {\n        this._innerElem.removeEventListener(event, callback, capture);\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/components/Button/Button.mjs?");

/***/ }),

/***/ "./public/app/components/ChatMini/ChatMini.mjs":
/*!*****************************************************!*\
  !*** ./public/app/components/ChatMini/ChatMini.mjs ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(__webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ChatMiniComponent; });\n/* harmony import */ var _Button_Button_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Button/Button.mjs */ \"./public/app/components/Button/Button.mjs\");\n/* harmony import */ var _modules_User_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../modules/User.mjs */ \"./public/app/modules/User.mjs\");\n/* harmony import */ var _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../modules/EventBus.js */ \"./public/app/modules/EventBus.js\");\n\n\n\n\n\n\nclass ChatMiniComponent {\n    constructor({ el, width = 230, height = 300 } = {}) {\n        this.el = el;\n        this.width = width;\n        this.height = height;\n    }\n\n    show() {\n        console.log('показать чат');\n        this.chat.hidden = false;\n        if (_modules_User_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isAuth() ) {\n            this.userButton.hidden = false;\n        } else {\n            this.userButton.hidden = true;\n        }\n    }\n\n    hide() {\n        this.chat.hidden = true;\n    }\n\n    toggle() {\n        if (this.chat.hidden) {\n            this.show();\n        } else {\n            this.hide();\n        }\n    }\n\n    render() {\n        this.renderBlock();\n        const iframe = this.el.querySelector('iframe');\n\n        const userButton = new _Button_Button_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n            el: this.userButton,\n            className: 'app-router-ignore chat-component-open-btn',\n            text: '<div class=\"user-btn\"></div>',\n        });\n        userButton.on({\n            event: 'click',\n            callback: (event) => {\n                event.preventDefault();\n                console.log('u чат');\n                const mes = {\n                    type: 'show-list',\n                    userId: _modules_User_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getUser().id,\n                    userNickName: _modules_User_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getUser().nickname,\n                };\n\n                iframe.contentWindow.postMessage(JSON.stringify(mes), '*');\n            },\n        });\n        userButton.render();\n\n        const openButton = new _Button_Button_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n            el: this.openButton,\n            className: 'app-router-ignore chat-component-open-btn',\n            text: '<div class=\"square\"></div>',\n        });\n        openButton.on({\n            event: 'click',\n            callback: (event) => {\n                event.preventDefault();\n                console.log('открыть чат');\n                // iframe.contentWindow.width = '100%';\n                // iframe.contentWindow.height = '100%';\n                // launchFullscreen(this.chat);\n                this.hide();\n                _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].emit('chat');\n            },\n        });\n        openButton.render();\n    }\n\n    renderBlock() {\n        this.chat = document.createElement('div');\n        this.chat.className = 'chat-block chat-block--decoration';\n\n        this.hide();\n\n        this.chatHead = document.createElement('div');\n        this.chatHead.className = 'chat-block__head-component';\n        this.chat.appendChild(this.chatHead);\n\n        this.nameBlock = document.createElement('div');\n        this.nameBlock.className = 'head-component__name';\n        this.chatHead.appendChild(this.nameBlock);\n        this.nameBlock.innerHTML += '<p class\"head-component__name--vertical\">KetnipzChat</p>';\n\n        this.openButton = document.createElement('div');\n        this.openButton.className = 'head-component__open-button';\n        this.chatHead.appendChild(this.openButton);\n\n        this.userButton = document.createElement('div');\n        this.openButton.appendChild(this.userButton);\n        this.userButton.hidden = true;\n\n        this.iframeBlock = document.createElement('div');\n        this.iframeBlock.className = 'chat-block__iframe-block';\n        this.chat.appendChild(this.iframeBlock);\n\n        this.iframe = document.createElement('iframe');\n        this.iframe.setAttribute('width', '230');\n        this.iframe.setAttribute('height', '300');\n        this.iframe.setAttribute('src', 'app/chat/chat.html');\n        this.iframe.className = 'iframe-block__iframe';\n        this.iframeBlock.appendChild(this.iframe);\n\n        this.el.appendChild(this.chat);\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/components/ChatMini/ChatMini.mjs?");

/***/ }),

/***/ "./public/app/components/Error/Error.mjs":
/*!***********************************************!*\
  !*** ./public/app/components/Error/Error.mjs ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(__webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ErrorComponent; });\n/* harmony import */ var _Button_Button_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Button/Button.mjs */ \"./public/app/components/Button/Button.mjs\");\n\n\nclass ErrorComponent {\n    constructor({ el = document.body, path = '/', error } = {}) {\n        this._el = el;\n        this._path = path;\n        this._error = error;\n    }\n\n    render() {\n        this._el.innerHTML = '';\n\n        const block = document.createElement('div');\n        block.className = 'errorBlock';\n        block.innerHTML += this._error;\n\n        this._el.appendChild(block);\n\n        const okButton = new _Button_Button_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n            el: this._el,\n            href: this._path,\n            text: 'OK',\n        });\n        okButton.render();\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/components/Error/Error.mjs?");

/***/ }),

/***/ "./public/app/components/Form/Form.mjs":
/*!*********************************************!*\
  !*** ./public/app/components/Form/Form.mjs ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(__webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return FormComponent; });\n/* harmony import */ var _modules_Utils_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../modules/Utils.mjs */ \"./public/app/modules/Utils.mjs\");\n\n\nclass FormComponent {\n    constructor({ el = document.body, name, header, inputs = [], multipart = false } = {}) {\n        this._el = el;\n        this._name = name;\n        this._header = header;\n        this._inputs = inputs;\n        this._innerElem = null;\n        this._errorsList = null;\n        this._multipart = multipart;\n    }\n\n    render() {\n        const options = {\n            name: this._name,\n            header: this._header,\n            inputs: this._inputs,\n        };\n\n        const form = window.formTmplTemplate(options);\n        this._el.insertAdjacentHTML('beforeend', form);\n        this._innerElem = this._el.querySelector('form');\n        if (this._multipart) {\n\n            this._innerElem.setAttribute('enctype', 'multipart/form-data');\n        }\n\n        this._errorsList = document.createElement('ul');\n        const submitButton = this._innerElem.elements['submit'];\n        this._innerElem.insertBefore(this._errorsList, submitButton);\n    }\n\n    on({ event = 'click', callback = _modules_Utils_mjs__WEBPACK_IMPORTED_MODULE_0__[\"noop\"], capture = false }) {\n        if (this._innerElem !== null) {\n            this._innerElem.addEventListener(event, callback, capture);\n        } else {\n            console.log('You cant add eventListener before render');\n        }\n    }\n\n    off({ event = 'click', callback = _modules_Utils_mjs__WEBPACK_IMPORTED_MODULE_0__[\"noop\"], capture = false }) {\n        this._innerElem.removeEventListener(event, callback, capture);\n    }\n\n    get innerElem() {\n        return this._innerElem;\n    }\n\n    showErrors(errors = []) {\n        errors.forEach( (item) => {\n            this._errorsList.innerHTML += `<li>${item['text']}</li>`;\n        });\n    }\n\n    hideErrors() {\n        this._errorsList.innerHTML = '';\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/components/Form/Form.mjs?");

/***/ }),

/***/ "./public/app/components/Link/Link.mjs":
/*!*********************************************!*\
  !*** ./public/app/components/Link/Link.mjs ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(__webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return LinkComponent; });\n/* harmony import */ var _modules_Utils_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../modules/Utils.mjs */ \"./public/app/modules/Utils.mjs\");\n\n\nclass LinkComponent {\n    constructor({ el = document.body, text = '', href = '', className = 'default_link' }) {\n        this._el = el;\n        this._text = text;\n        this._href = href;\n        this._className = className;\n        this._innerElem = null;\n        this._listenersToAdd = [];\n    }\n\n    get href() {\n        return this._href;\n    }\n\n    set href(href) {\n        this._href = href;\n    }\n\n    render() {\n        this._innerElem = Object(_modules_Utils_mjs__WEBPACK_IMPORTED_MODULE_0__[\"createElementFromHTML\"])(`\n        <a href=\"${this._href}\" class=\"${this._className}\" data-href=\"${this._href}\">\n            ${this._text}\n        </a>\n        `);\n        this._el.appendChild(this._innerElem);\n\n\n        this._listenersToAdd.forEach( (entry) => {\n            this.on(entry);\n        });\n        this._listenersToAdd = [];\n    }\n\n    on({ event = 'click', callback = _modules_Utils_mjs__WEBPACK_IMPORTED_MODULE_0__[\"noop\"], capture = false }) {\n        if (this._innerElem !== null) {\n            this._innerElem.addEventListener(event, callback, capture);\n        } else {\n            this._listenersToAdd.push({ event, callback, capture });\n        }\n    }\n\n    off({ event = 'click', callback = _modules_Utils_mjs__WEBPACK_IMPORTED_MODULE_0__[\"noop\"], capture = false }) {\n        this._innerElem.removeEventListener(event, callback, capture);\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/components/Link/Link.mjs?");

/***/ }),

/***/ "./public/app/components/Loader/Loader.js":
/*!************************************************!*\
  !*** ./public/app/components/Loader/Loader.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return LoaderComponent; });\nclass LoaderComponent {\n    constructor(el) {\n        this._parent = el;\n        this._el = document.createElement('div');\n    }\n\n    render() {\n        this._el.className = 'bouncing-loader';\n        this._el.innerHTML = '<div></div>'.repeat(3);\n        this._parent.appendChild(this._el);\n    }\n\n    hide() {\n        this._el.hidden = true;\n        this._parent.removeChild(this._el);\n    }\n\n    show() {\n        this._el.hidden = false;\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/components/Loader/Loader.js?");

/***/ }),

/***/ "./public/app/components/Menu/Menu.mjs":
/*!*********************************************!*\
  !*** ./public/app/components/Menu/Menu.mjs ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(__webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MenuComponent; });\n/* harmony import */ var _Button_Button_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Button/Button.mjs */ \"./public/app/components/Button/Button.mjs\");\n/* harmony import */ var _modules_Utils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../modules/Utils.mjs */ \"./public/app/modules/Utils.mjs\");\n\n\n\nclass MenuComponent {\n    constructor({ el = document.body, titles = {}, actionOnButton = _modules_Utils_mjs__WEBPACK_IMPORTED_MODULE_1__[\"noop\"] } = {}) {\n        this._el = el;\n        this._titles = titles;\n        this._actionOnButton = actionOnButton;\n    }\n\n    render() {\n        const menu = document.createElement('div');\n        menu.className = 'menu';\n\n        this._titles.forEach( (title, href) => {\n            const button = new _Button_Button_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n                el: menu,\n                href: href,\n                text: title,\n                className: 'cute-btn cute-btn--w10rem',\n            });\n\n            button.on({\n                event: 'click',\n                callback: this._actionOnButton,\n            });\n\n            button.render();\n        });\n\n        this._el.appendChild(menu);\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/components/Menu/Menu.mjs?");

/***/ }),

/***/ "./public/app/components/Profile/Profile.mjs":
/*!***************************************************!*\
  !*** ./public/app/components/Profile/Profile.mjs ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(__webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ProfileComponent; });\nclass ProfileComponent {\n    constructor({ el = document.body, data = {} } = {}) {\n        this._el = el;\n        this._data = data;\n    }\n\n    get data() {\n        return this._data;\n    }\n\n    set data(data) {\n        this._data = data;\n    }\n\n    render() {\n        this._el.insertAdjacentHTML(\n            'afterbegin', `\n            <div class=\"profile\">\n                <h2>Профиль</h2>\n            </div>\n            `.trim()\n        );\n\n        const profileBlock = this._el.querySelector('.profile');\n        const {\n            nickname,\n            email,\n            record,\n            win,\n            draws,\n            loss,\n        } = this._data;\n        const profile = {\n            'Никнейм: ': nickname,\n            'Почта: ': email,\n            'Рекорд: ': record,\n            'Побед: ': win,\n            'Ничьих: ': draws,\n            'Поражений: ': loss,\n            'Винрейт: ': `${loss + win === 0 ? 100 : ( (win / (loss + win) ) * 100).toFixed(2)}%`,\n        };\n        for (const [field, value] of Object.entries(profile) ) {\n            profileBlock.insertAdjacentHTML(\n                'beforeend', `\n                <div>\n                    <b>${field}</b>\n                    <span>${value}</span>\n                </div>\n                `.trim()\n            );\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/components/Profile/Profile.mjs?");

/***/ }),

/***/ "./public/app/components/Scoreboard/Scoreboard.mjs":
/*!*********************************************************!*\
  !*** ./public/app/components/Scoreboard/Scoreboard.mjs ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(__webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ScoreboardComponent; });\n/* harmony import */ var _Button_Button_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Button/Button.mjs */ \"./public/app/components/Button/Button.mjs\");\n/* harmony import */ var _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../modules/EventBus.js */ \"./public/app/modules/EventBus.js\");\n\n\n\nclass ScoreboardComponent {\n    constructor({\n        el = document.body, data = [], limit = 5, total = 5,\n    } = {}) {\n        this._el = el;\n        this._data = data;\n        this._page = 0;\n        this._limit = limit;\n        this._total = total;\n        this._first = 1;\n\n        this._fetchData = null;\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].on('scoreboard:get-page', this.setFetchData.bind(this) );\n    }\n\n    get data() {\n        return this._data;\n    }\n\n    set data(data) {\n        this._data = data;\n    }\n\n    setFetchData(data) {\n        this._fetchData = data;\n        const { players, total } = this._fetchData;\n        this._data = players;\n        this._total = total;\n        this.showPlayers();\n    }\n\n    fetchPage(limit, page) {\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].emit('fetch-page-scoreboard', { limit, page });\n    }\n\n    render() {\n        this._el.insertAdjacentHTML(\n            'beforeend', `\n                <h2>Scoreboard</h2>\n                <div class=\"scoreboard\">\n                    <ol>\n                        <span class=\"scoreboard_head\">\n                            <span class=\"scoreboard_node__position\">#</span>\n                            <span class=\"scoreboard_node__name\">Игрок</span>\n                            <span class=\"scoreboard_node__scores\">Рекорд</span>\n                        </span>\n                        <div class=\"scoreboard_list scrolable\"></div>\n                        <div class=\"scoreboard__paginator\"></div>\n                    </ol>\n                </div>\n                `.trim()\n        );\n\n        const paginator = this._el.querySelector('.scoreboard__paginator');\n        const prevButton = new _Button_Button_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({ el: paginator, text: '<', className: 'cute-btn app-router-ignore' });\n        const nextButton = new _Button_Button_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({ el: paginator, text: '>', className: 'cute-btn app-router-ignore' });\n        const pageIndicator = document.createElement('span');\n        pageIndicator.className = 'page-indicator';\n        pageIndicator.textContent = '1';\n\n        prevButton.render();\n        paginator.appendChild(pageIndicator);\n        nextButton.render();\n\n        prevButton.on({\n            event: 'click',\n            callback: (event) => {\n                event.preventDefault();\n                if (this._page === 0) {\n                    return;\n                }\n                this.hidePlayers();\n                this._page -= 1;\n                this._first = this._page * this._limit + 1;\n                pageIndicator.textContent = this._page + 1;\n                this.fetchPage(this._limit, this._page);\n            },\n        });\n\n        nextButton.on({\n            event: 'click',\n            callback: (event) => {\n                event.preventDefault();\n                if (this._total < (this._page + 1) * this._limit + 1) {\n                    return;\n                }\n                this.hidePlayers();\n                this._page += 1;\n                this._first = this._page * this._limit + 1;\n                pageIndicator.textContent = this._page + 1;\n                this.fetchPage(this._limit, this._page);\n            },\n        });\n\n        this.showPlayers();\n    }\n\n    hidePlayers() {\n        this._scoreboardList.innerHTML = '';\n    }\n\n    showPlayers() {\n        this._scoreboardList = this._el.querySelector('.scoreboard_list');\n        const scoreboardNodeTemplate = ({ position, nickname, record }) => `\n            <li class=\"scoreboard_node\">\n                <span class=\"scoreboard_node__position\">${position}</span>\n                <span class=\"scoreboard_node__name\">${nickname}</span>\n                <span class=\"scoreboard_node__scores\">${record}</span>\n            </li>\n        `.trim();\n\n\n        if (this._data) {\n            this._data.forEach( (item, i) => {\n                const position = this._first + i;\n                this._scoreboardList.innerHTML += scoreboardNodeTemplate({ ...item, position });\n            });\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/components/Scoreboard/Scoreboard.mjs?");

/***/ }),

/***/ "./public/app/components/Section/Section.mjs":
/*!***************************************************!*\
  !*** ./public/app/components/Section/Section.mjs ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(__webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SectionComponent; });\nclass SectionComponent {\n    constructor({ el = document.body, name = 'index' } = {}) {\n        this._el = el;\n        this._name = name;\n        this._sectionContent = null;\n    }\n\n    render() {\n        this._el.insertAdjacentHTML('beforeend', `\n            <section class=\"${this._name}_page\">\n                <div class=\"${this._name}__main\">\n                </div>\n            </section>\n            `.trim() );\n\n        this._sectionContent = this._el.querySelector(`.${this._name}__main`);\n    }\n\n    append(el = '') {\n        if (this._sectionContent === null) {\n            console.log('You cant append before render');\n        } else {\n            this._sectionContent.appendChild(el);\n        }\n    }\n\n    get sectionContent() {\n        return this._sectionContent;\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/components/Section/Section.mjs?");

/***/ }),

/***/ "./public/app/game/Core/Events.js":
/*!****************************************!*\
  !*** ./public/app/game/Core/Events.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nconst EVENTS = {\n    START_GAME: 'START_GAME',\n    FINISH_GAME: 'FINISH_GAME',\n    CONTROLS_PRESSED: 'CONTROLS_PRESSED',\n    GAME_STATE_CHANGED: 'GAME_STATE_CHANGED',\n    // CLOSE_GAME: 'CLOSE_GAME',\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (EVENTS);\n\n\n//# sourceURL=webpack:///./public/app/game/Core/Events.js?");

/***/ }),

/***/ "./public/app/game/Core/GameCore.js":
/*!******************************************!*\
  !*** ./public/app/game/Core/GameCore.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return GameCore; });\n/* harmony import */ var _Events_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Events.js */ \"./public/app/game/Core/Events.js\");\n/* harmony import */ var _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../modules/EventBus.js */ \"./public/app/modules/EventBus.js\");\n\n\n\nconst KEYS = {\n    JUMP: [' ', '__touch', 'ArrowUp', 'W', 'w', 'Ц', 'ц'],\n    LEFT: ['a', 'A', 'ф', 'Ф', 'ArrowLeft', '__left_incline'],\n    RIGHT: ['d', 'D', 'в', 'В', 'ArrowRight', '__right_incline'],\n};\n\nclass GameCore {\n    constructor(controller, scene) {\n        this.controller = controller;\n        this.scene = scene;\n        this.controllersLoopIntervalId = null;\n\n        this.onGameStarted = this.onGameStarted.bind(this);\n        this.onGameStateChanged = this.onGameStateChanged.bind(this);\n        this.onGameFinished = this.onGameFinished.bind(this);\n        this.onControlsPressed = this.onControlsPressed.bind(this);\n    }\n\n    start() {\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].on(_Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].CONTROLS_PRESSED, this.onControlsPressed);\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].on(_Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].START_GAME, this.onGameStarted);\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].on(_Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].FINISH_GAME, this.onGameFinished);\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].on(_Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].GAME_STATE_CHANGED, this.onGameStateChanged);\n\n        const { controller } = this;\n        this.controllersLoopIntervalId = setInterval( () => {\n            const actions = controller.diff();\n\n            if (Object.keys(actions).some(key => actions[key]) ) {\n                _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].emit(_Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].CONTROLS_PRESSED, actions);\n            }\n        }, 20);\n    }\n\n    destroy() {\n        clearInterval(this.controllersLoopIntervalId);\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].off(_Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].START_GAME, this.onGameStarted);\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].off(_Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].FINISH_GAME, this.onGameFinished);\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].off(_Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].CONTROLS_PRESSED, this.onControlsPressed);\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].off(_Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].GAME_STATE_CHANGED, this.onGameStateChanged);\n\n        this.controller.destroy();\n        this.scene.stop();\n    }\n\n    stopController() {\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].off(_Events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].CONTROLS_PRESSED, this.onControlsPressed);\n        this.controller.destroy();\n    }\n\n    pressed(name, data) {\n        return KEYS[name].some( key => data[key.toLowerCase()] );\n    }\n\n    onControlsPressed() {\n        console.error('this method must be overriden');\n    }\n\n    onGameStarted() {\n        console.error('this method must be overriden');\n    }\n\n    onGameFinished() {\n        console.error('this method must be overriden');\n    }\n\n    onGameStateChanged() {\n        console.error('this method must be overriden');\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/game/Core/GameCore.js?");

/***/ }),

/***/ "./public/app/game/Core/Offline.js":
/*!*****************************************!*\
  !*** ./public/app/game/Core/Offline.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return OfflineGame; });\n/* harmony import */ var _GameCore_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GameCore.js */ \"./public/app/game/Core/GameCore.js\");\n/* harmony import */ var _Events_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Events.js */ \"./public/app/game/Core/Events.js\");\n/* harmony import */ var _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../modules/EventBus.js */ \"./public/app/modules/EventBus.js\");\n/* harmony import */ var _modules_Utils_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../modules/Utils.mjs */ \"./public/app/modules/Utils.mjs\");\n\n\n\n\n\n\n\n// percentsX считаю в процентах слева направо\n// percentsY считаю в процентах снизу вверх\nclass OfflineGame extends _GameCore_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor(controller, scene) {\n        console.log('OfflineGame()');\n        super(controller, scene);\n        this.state = {};\n        this.lastFrame = 0;\n        this.gameloopRequestId = null;\n        this.productGenIntrvalID = null;\n        this.gameloop = this.gameloop.bind(this);\n\n        this.playerNum = 1;\n        this.playerName = `player${this.playerNum}`;\n    }\n\n    start() {\n        super.start();\n        let truckPos = Object(_modules_Utils_mjs__WEBPACK_IMPORTED_MODULE_3__[\"randInt\"])(20, 80);\n        while (truckPos < 60 && truckPos > 40) {\n            truckPos = Object(_modules_Utils_mjs__WEBPACK_IMPORTED_MODULE_3__[\"randInt\"])(20, 80);\n        }\n        this.state = {\n            player1: {\n                percentsY: 8.7,\n                percentsX: 50,\n                direction: 'RIGHT',\n                width: 10,\n                height: 18,\n                speed: 1.7,\n                speedY: 0,\n                score: 0,\n            },\n            truck: {\n                percentsX: truckPos,\n                percentsY: 6,\n                width: 10,\n                height: 15,\n            },\n            collected: [],\n        };\n\n        this.state.playerGravity = 0.4;\n        this.state.products = [];\n\n        this.state.playerName = this.playerName;\n\n        this.genTargetList(4);\n\n        this.state.productWidth = 5;\n        this.state.productHeight = 5;\n        this.state.startSpeed = 30;\n        this.state.gravityAcceleration = 0;\n        this.state.productsIntervalPercents = 35;\n        this.state.productsRand = 3;\n\n        this.productGenIntrvalID = setInterval( () => {\n            console.log('продукт создан');\n            this.state.products.push({\n                type: Object(_modules_Utils_mjs__WEBPACK_IMPORTED_MODULE_3__[\"randInt\"])(1, 6),\n                percentsX: Object(_modules_Utils_mjs__WEBPACK_IMPORTED_MODULE_3__[\"randInt\"])(5, 95), // считаем что тут задаем центр\n                percentsY: 100 + Object(_modules_Utils_mjs__WEBPACK_IMPORTED_MODULE_3__[\"randInt\"])(1, 5),\n                speed: this.state.startSpeed, // randInt(25, 40), // доли тысячные\n            });\n        }, 1 * 1000);\n\n        this.gameTime = 30; // seconds\n        this.state.leftTime = this.gameTime;\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].emit(_Events_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].START_GAME, this.state);\n\n        this.endTimerID = setTimeout( () => {\n            console.log('FINISH!!!!');\n            clearInterval(this.secsInervalID);\n            clearTimeout(this.endTimerID);\n            cancelAnimationFrame(this.gameloopRequestId);\n            this.stopController();\n            _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].emit('show-game-result', { text: 'Финиш!', score: this.state.player1.score });\n        }, this.gameTime * 1000);\n        this.secsInervalID = setInterval( () => {\n            this.gameTime -= 1;\n            this.state.leftTime = this.gameTime;\n        }, 1000);\n    }\n\n    destroy() {\n        console.log('DESTROOOOY!');\n        clearTimeout(this.endTimerID);\n        clearInterval(this.productGenIntrvalID);\n        cancelAnimationFrame(this.gameloopRequestId);\n        super.destroy();\n    }\n\n    gameloop(now) {\n        const delay = now - this.lastFrame;\n        this.lastFrame = now;\n        this.state.collected = [];\n\n        for (let i = 0; i < this.state.products.length; i++) {\n            const product = this.state.products[i];\n            if (product.percentsY <= 110) {\n                product.speed += this.state.gravityAcceleration * delay;\n            }\n\n            product.percentsY -= product.speed / 1000 * delay;\n            if (this.macroCollision(product, this.state.player1) ) {\n                // Если собрали продукт\n                const productPosInTargetList = this.state.player1.targetList.indexOf(product.type);\n                const isTarget = productPosInTargetList !== -1;\n                let points = 0;\n                if (isTarget) {\n                    points = 3;\n                    this.state.player1.targetList.splice(productPosInTargetList, 1);\n                } else {\n                    points = -1;\n                }\n                this.state.player1.score += points;\n                this.state.collected.push({\n                    percentsX: product.percentsX,\n                    percentsY: product.percentsY,\n                    points: points,\n                });\n                this.state.products.splice(i, 1);\n            }\n            if (product.percentsY < -20) {\n                // пропал продукт\n                this.state.products.splice(i, 1);\n            }\n        }\n\n        if (this.macroCollision(this.state.truck, this.state.player1) ) {\n            if (this.state.truck.percentsX > this.state.player1.percentsX) {\n                this.state.player1.blockRight = true;\n                this.state.player1.blockLeft = false;\n            } else {\n                this.state.player1.blockRight = false;\n                this.state.player1.blockLeft = true;\n            }\n        }\n\n        if (!this.state.player1.blockDown && this.macroCollision(this.state.truck, this.state.player1) && (this.state.player1.percentsY > 8.7) ) {\n            if (this.state.player1.speedY < 0\n                && (this.state.player1.percentsX) < (this.state.truck.percentsX + this.state.truck.width / 2)\n                && (this.state.player1.percentsX) > (this.state.truck.percentsX - this.state.truck.width / 2) ) {\n                this.state.player1.blockDown = true;\n                this.state.player1.speedY = -0.4;\n                this.state.player1.percentsY = this.state.truck.height + 4;\n            } else {\n                this.state.player1.blockDown = false;\n                this.state.player1.percentsY = 8.7;\n            }\n        }\n\n        if (this.state.player1.blockDown\n            && !( (this.state.player1.percentsX) < (this.state.truck.percentsX + this.state.truck.width / 2)\n                 && (this.state.player1.percentsX) > (this.state.truck.percentsX - this.state.truck.width / 2) ) ) {\n            this.state.player1.blockDown = false;\n            this.state.player1.percentsY = 8.7;\n            this.state.player1.speedY = 0;\n        }\n\n\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].emit(_Events_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].GAME_STATE_CHANGED, this.state);\n\n        const allCollected = this.state.player1.targetList.length === 0;\n\n        if (allCollected) {\n            this.genTargetList(4);\n        }\n        this.gameloopRequestId = requestAnimationFrame(this.gameloop);\n    }\n\n    genTargetList(len = 4) {\n        this.state.player1.targetList = [];\n        for (let i = 0; i < len; i++) {\n            let newProduct = Object(_modules_Utils_mjs__WEBPACK_IMPORTED_MODULE_3__[\"randInt\"])(1, 6);\n            while (this.state.player1.targetList.indexOf(newProduct) !== -1) {\n                newProduct = Object(_modules_Utils_mjs__WEBPACK_IMPORTED_MODULE_3__[\"randInt\"])(1, 6);\n            }\n            this.state.player1.targetList.push(newProduct);\n        }\n    }\n\n    macroCollision(product, me) {\n        const { productWidth, productHeight } = this.state;\n        const { width: meWidth, height: meHeight } = this.state[this.playerName];\n\n        // координаты левого верхнего угла продукта\n        const productX = product.percentsX - (productWidth - 1) / 2;\n        const productY = product.percentsY - (productHeight - 8) / 2;\n\n        // координаты левого верхнего угла игрока\n        const meX = me.percentsX - (meWidth - 2) / 2;\n        const meY = me.percentsY - (meHeight - 15) / 2;\n\n\n        let XColl = false;\n        let YColl = false;\n\n        if ( (productX + productWidth - 0.5 >= meX) && (productX <= meX + meWidth - 1) ) XColl = true;\n        if ( (productY + productHeight - 4 >= meY) && (productY <= meY + meHeight - 7.5) ) YColl = true;\n\n        return XColl && YColl;\n    }\n\n    onControlsPressed(event) {\n        if (this.pressed('LEFT', event) ) {\n            if (!this.state.player1.blockLeft) {\n                this.state.player1.percentsX = Math.max(0, this.state.player1.percentsX - this.state.player1.speed);\n                this.state.player1.direction = 'LEFT';\n            }\n            _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].emit(_Events_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].GAME_STATE_CHANGED, this.state);\n            this.state.player1.blockRight = false;\n        }\n        if (this.pressed('RIGHT', event) ) {\n            if (!this.state.player1.blockRight) {\n                this.state.player1.percentsX = Math.min(100, this.state.player1.percentsX + this.state.player1.speed);\n                this.state.player1.direction = 'RIGHT';\n            }\n            _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].emit(_Events_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].GAME_STATE_CHANGED, this.state);\n            this.state.player1.blockLeft = false;\n        }\n        if (this.pressed('JUMP', event) ) {\n            this.state.player1.blockRight = false;\n            this.state.player1.blockLeft = false;\n            this.state.player1.blockDown = false;\n            if (this.state.player1.speedY === 0) {\n                this.state.player1.speedY = 4;\n                this.jumpInterval = setInterval( () => {\n                    if (this.state.player1.blockDown === false) {\n                        this.state.player1.percentsY += this.state.player1.speedY;\n                        this.state.player1.speedY -= this.state.playerGravity;\n                    } else {\n                        this.state.player1.blockRight = false;\n                        this.state.player1.blockLeft = false;\n                        this.state.player1.speedY = 0;\n                        this.state.player1.percentsY = this.state.truck.height + 4;\n                        clearInterval(this.jumpInterval);\n                        this.jumpInterval = null;\n                        return;\n                    }\n                    if (this.state.player1.percentsY <= 8.7) {\n                        this.state.player1.speedY = 0;\n                        this.state.player1.percentsY = 8.7;\n                        clearInterval(this.jumpInterval);\n                        this.jumpInterval = null;\n                    }\n                }, 20);\n            }\n\n            _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].emit(_Events_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].GAME_STATE_CHANGED, this.state);\n        }\n    }\n\n    onGameStarted(event) {\n        this.controller.start();\n        this.scene.init(event);\n        this.scene.start();\n\n        this.lastFrame = performance.now();\n        this.gameloopRequestId = requestAnimationFrame(this.gameloop);\n    }\n\n    onGameFinished(scores) {\n        console.log('gameFinished()');\n        cancelAnimationFrame(this.gameloopRequestId);\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].emit('CLOSE GAME', scores);\n    }\n\n    onGameStateChanged(event) {\n        this.scene.setState(event);\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/game/Core/Offline.js?");

/***/ }),

/***/ "./public/app/game/Game.js":
/*!*********************************!*\
  !*** ./public/app/game/Game.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Game; });\n/* harmony import */ var _GameModes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GameModes.js */ \"./public/app/game/GameModes.js\");\n/* harmony import */ var _Core_Offline_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Core/Offline.js */ \"./public/app/game/Core/Offline.js\");\n/* harmony import */ var _GameScene_GameScene_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./GameScene/GameScene.js */ \"./public/app/game/GameScene/GameScene.js\");\n/* harmony import */ var _GameController_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./GameController.js */ \"./public/app/game/GameController.js\");\n\n\n\n\n\nclass Game {\n    constructor(mode, canvas) {\n        console.log('Game()');\n        let GameConstructor = null;\n        switch (mode) {\n        case _GameModes_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].ONLINE_MULTI:\n        case _GameModes_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].ONLINE_SINGLE:\n        case _GameModes_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].OFFLINE:\n            GameConstructor = _Core_Offline_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\n            break;\n        default:\n            console.log(mode, ' NOT FOUND');\n        }\n\n        this.gameScene = new _GameScene_GameScene_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](canvas);\n        this.gameController = new _GameController_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"](canvas);\n        this.gameCore = new GameConstructor(this.gameController, this.gameScene);\n    }\n\n    start() {\n        this.gameCore.start();\n    }\n\n    destroy() {\n        this.gameCore.destroy();\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/game/Game.js?");

/***/ }),

/***/ "./public/app/game/GameController.js":
/*!*******************************************!*\
  !*** ./public/app/game/GameController.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return GameController; });\nclass GameController {\n    constructor(canvas) {\n        this.canvas = canvas;\n        this.previous = {};\n        this.keys = {};\n\n        this.onPress = this.keyHandler.bind(this, 'press');\n        this.onUp = this.keyHandler.bind(this, 'up');\n        this.sensivity = 1;\n    }\n\n    start() {\n        document.addEventListener('keydown', this.onPress);\n        document.addEventListener('keyup', this.onUp);\n        // let gyroscope = new Gyroscope({frequency: 60});\n        // gyroscope.addEventListener('reading', e => {\n        //     alert(`$Y:${gyroscope.y}`);\n        // });\n        // gyroscope.start();\n        window.addEventListener('devicemotion', this.onDeviceMotion.bind(this), true);\n        window.addEventListener('touchstart', this.onTouchStart.bind(this) );\n        window.addEventListener('touchend', this.onTouchEnd.bind(this) );\n    }\n    destroy() {\n        document.removeEventListener('keydown', this.onPress);\n        document.removeEventListener('keyup', this.onUp);\n        window.removeEventListener('devicemotion', this.onDeviceMotion.bind(this), true);\n        window.removeEventListener('touchstart', this.onTouchStart.bind(this) );\n        window.removeEventListener('touchend', this.onTouchEnd.bind(this) );\n    }\n\n    onTouchStart() {\n        this.keys['__touch'] = true;\n    }\n\n    onTouchEnd() {\n        this.keys['__touch'] = false;\n    }\n\n    onDeviceMotion(e) {\n        // e.acceleration\n        this.angleY = e.accelerationIncludingGravity.y;\n        this.keys['__right_incline'] = this.angleY > this.sensivity;\n        this.keys['__left_incline'] = this.angleY < -this.sensivity;\n        // if (this.angleY < 0) {\n        //     // Наклон влево\n        //     // alert(`Влево ${angleY}`);\n        //     this.keys['__right_incline'] = false;\n        //     this.keys['__left_incline'] = true;\n        // } else {\n        //     // Наклон вправо\n        //     // alert(`Вправо ${angleY}`);\n        //     this.keys['__right_incline'] = true;\n        //     this.keys['__left_incline'] = false;\n        // }\n    }\n\n    // нажата ли клавиша\n    isPressed(key) {\n        return this.keys[key];\n    }\n\n    //\n    /*\n    * Перезаписывает состояние клавиши\n    * @param {string} type - одно из двух 'press' или 'up'\n    * @param {MouseEvent} event\n    * */\n    keyHandler(type, event) {\n        this.keys[event.key.toLowerCase()] = type === 'press';\n    }\n\n    diff() {\n        let allKeys = [];\n        allKeys.push(...Object.keys(this.previous) );\n        allKeys.push(...Object.keys(this.keys) );\n        allKeys = allKeys.map( key => key.toLowerCase() );\n        allKeys = allKeys.filter( (key, pos, all) => {\n            return all.indexOf(key, pos + 1) === -1; // кикаем дубликаты\n        });\n        const clicked = allKeys.reduce( (res, key) => {\n            // либо нажали либо не отпускали с прошлого вызова\n            res[key] = this.keys[key];\n            // res[key] = !this.previous[key] && this.keys[key];\n            return res;\n        }, {});\n\n        // this.previous = Object.assign({}, this.keys);\n        this.previous = Object.assign({}, this.keys);\n        return clicked;\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/game/GameController.js?");

/***/ }),

/***/ "./public/app/game/GameModes.js":
/*!**************************************!*\
  !*** ./public/app/game/GameModes.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nconst GAME_MODES = {\n    ONLINE_SINGLE: 'ONLINE_SINGLE',\n    ONLINE_MULTI: 'ONLINE_MULTI',\n    OFFLINE: 'OFFLINE',\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (GAME_MODES);\n\n\n//# sourceURL=webpack:///./public/app/game/GameModes.js?");

/***/ }),

/***/ "./public/app/game/GameScene/FinishGameComponent/FinishGameComponent.js":
/*!******************************************************************************!*\
  !*** ./public/app/game/GameScene/FinishGameComponent/FinishGameComponent.js ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return FinishGameComponent; });\n/* harmony import */ var _components_Button_Button_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../components/Button/Button.mjs */ \"./public/app/components/Button/Button.mjs\");\n/* harmony import */ var _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../modules/EventBus.js */ \"./public/app/modules/EventBus.js\");\n/* harmony import */ var _Core_Events_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../Core/Events.js */ \"./public/app/game/Core/Events.js\");\n\n\n\n\nclass FinishGameComponent {\n    constructor({ el } = {}) {\n        this.el = el;\n\n        this.text = null;\n        this.score = null;\n\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].on('show-game-result', this.setInfo.bind(this) );\n    }\n\n    setInfo({ text, score }) {\n        this.text = text;\n        this.score = score;\n        this.render();\n    }\n\n    destroy() {\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].off('show-game-result', this.setInfo );\n        this.el.innerHTML = '';\n        this.render = () => null;\n    }\n\n    render() {\n        console.log('render finish');\n        this.block = document.createElement('div');\n        this.block.className = 'game-scene__game-finish-component app-router-ignore';\n\n        this.block.innerHTML += `<div class=\"game-finish-component__text-block\"><p>${this.text}</p> <p>Вы набрали: ${this.score} очков</p></div>`;\n\n        const backButton = new _components_Button_Button_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n            el: this.block,\n            text: 'Меню',\n        });\n        backButton.on({\n            event: 'click',\n            callback: (event) => {\n                event.preventDefault();\n                console.log('ФИНИШКОМПОНЕНТ');\n                this.destroy();\n                _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].emit(_Core_Events_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].FINISH_GAME, this.score);\n            },\n        });\n        backButton.render();\n\n        const scene = this.el.querySelector('.game-scene');\n        scene.classList.add('game-scene--blurred');\n\n        this.el.appendChild(this.block);\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/game/GameScene/FinishGameComponent/FinishGameComponent.js?");

/***/ }),

/***/ "./public/app/game/GameScene/GameInfoComponent/GameInfoComponent.js":
/*!**************************************************************************!*\
  !*** ./public/app/game/GameScene/GameInfoComponent/GameInfoComponent.js ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return GameInfoComponent; });\nclass GameInfoComponent {\n    constructor({ parentElem, textSize = '30px', top = '11%', left = '2%' }) {\n        this.parentElem = parentElem;\n        this.score = null;\n        this.time = null;\n        this.productList = null;\n        this.infoElem = document.createElement('div');\n        this.infoElem.classList.add('game-scene__game-info-elem');\n        this.infoElem.style.fontSize = textSize;\n        this.infoElem.style.top = top;\n        this.infoElem.style.left = left;\n\n        this.parentElem.appendChild(this.infoElem);\n    }\n\n    setInfo({ score, time, productList }) {\n        this.score = score;\n        this.time = time;\n        this.productList = productList;\n    }\n\n    render() {\n        this.infoElem.innerHTML = `Очки: ${this.score}<br>Список покупок:<br><span class=\"game-info-elem__products\">${this.productList}</span><br>Время: ${this.time}`;\n    }\n\n    destroy() {\n        this.parentElem.removeChild(this.infoElem);\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/game/GameScene/GameInfoComponent/GameInfoComponent.js?");

/***/ }),

/***/ "./public/app/game/GameScene/GameScene.js":
/*!************************************************!*\
  !*** ./public/app/game/GameScene/GameScene.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return GameScene; });\n/* harmony import */ var _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../modules/EventBus.js */ \"./public/app/modules/EventBus.js\");\n/* harmony import */ var _modules_graphics_Scene_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../modules/graphics/Scene.js */ \"./public/app/modules/graphics/Scene.js\");\n/* harmony import */ var _Player_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Player.js */ \"./public/app/game/GameScene/Player.js\");\n/* harmony import */ var _Product_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Product.js */ \"./public/app/game/GameScene/Product.js\");\n/* harmony import */ var _ProductTypes_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ProductTypes.js */ \"./public/app/game/GameScene/ProductTypes.js\");\n/* harmony import */ var _GameInfoComponent_GameInfoComponent_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./GameInfoComponent/GameInfoComponent.js */ \"./public/app/game/GameScene/GameInfoComponent/GameInfoComponent.js\");\n/* harmony import */ var _ImageFigure_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ImageFigure.js */ \"./public/app/game/GameScene/ImageFigure.js\");\n\n\n\n\n\n\n\n\nclass GameScene {\n    constructor(canvas, poolSize = 7) {\n        this.bus = _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n        this.canvas = canvas;\n        this.poolSize = poolSize;\n        this.ctx = canvas.getContext('2d');\n\n        this.scene = new _modules_graphics_Scene_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this.ctx);\n        this.state = null;\n        this.requestFrameID = null;\n\n        this.lastFrameTime = 0;\n        this.products = [];\n\n        this.me = null;\n        this.productFiguresPool = null;\n        this.productPoolNext = null;\n\n        this.collectedFiguresPool = null;\n        this.collectedPoolNext = null;\n        this.collectedPoolUsing = null;\n\n        this.playerName = null;\n        this.opponentName = null;\n    }\n\n    init(state) {\n        const { ctx, scene } = this;\n\n        this.state = state;\n\n        this.playerName = this.state.playerName;\n\n        const { productWidth, productHeight } = state;\n        const { width: meWidth, height: meHeight } = state[this.playerName];\n        const pixWidth = meWidth / 100 * ctx.canvas.width;\n        const pixHeight = meHeight / 100 * ctx.canvas.height;\n\n        this.productFiguresPool = Array.from({ length: this.poolSize }, () => new _Product_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"](ctx) );\n        this.productFiguresPool.forEach( (product) => {\n            product.textSize = this.state.productHeight / 100 * ctx.canvas.height;\n            product.id = this.scene.push(product);\n            product.x = -100;\n            product.y = -100;\n            product.type = _ProductTypes_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].HIDDEN_POOL;\n        });\n        this.productPoolNext = 0;\n\n        this.collectedPoolUsing = [];\n        this.collectedFiguresPool = Array.from({ length: this.poolSize }, () => new _Product_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"](ctx) );\n        this.collectedFiguresPool.forEach( (collected) => {\n            collected.textSize = this.state.productHeight / 100 * ctx.canvas.height;\n            collected.id = this.scene.push(collected);\n            collected.x = -100;\n            collected.y = -100;\n            collected.type = _ProductTypes_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].HIDDEN_POOL;\n            this.collectedPoolUsing.push(false);\n        });\n        this.collectedPoolNext = 0;\n\n\n        this.me = new _Player_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](ctx, pixWidth, pixHeight);\n        this.me.id = this.scene.push(this.me);\n        this.state.products.forEach( (product) => {\n            const idx = this.productPoolNext;\n            if (idx >= this.productFiguresPool.length) {\n                console.error('Pool of productFigures out of range');\n                return;\n            }\n            this.productPoolNext += 1;\n            this.productFiguresPool[idx].x = (product.percentsX - productWidth / 2) / 100 * ctx.canvas.width;\n            this.productFiguresPool[idx].y = (100 - (product.percentsY - productHeight / 2) ) / 100 * ctx.canvas.height;\n            this.productFiguresPool[idx].type = product.type;\n        });\n\n        if (this.state.truck) {\n            this.truck = new _ImageFigure_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"](ctx, 'app/game/GameScene/img/telega.png');\n            this.truck.x = state.truck.percentsX / 100 * ctx.canvas.width;\n            this.truck.y = (100 - state.truck.percentsY) / 100 * ctx.canvas.height;\n            this.truck.width = state.truck.width / 100 * ctx.canvas.width;\n            this.truck.height = state.truck.height / 100 * ctx.canvas.height;\n            this.truck.id = scene.push(this.truck);\n        }\n\n        this.me.y = (100 - state[this.playerName].percentsY) / 100 * ctx.canvas.height;\n        this.me.x = state[this.playerName].percentsX / 100 * ctx.canvas.width;\n        this.me.direction = state[this.playerName].direction;\n        this.me.id = scene.push(this.me);\n        this.renderScene = this.renderScene.bind(this);\n    }\n\n    setState(state) {\n        const { ctx, scene } = this;\n\n        this.state = state;\n\n        this.me.jumping = this.state[this.playerName].percentsY > 8.7;\n\n        this.me.y = (100 - (state[this.playerName].percentsY) ) / 100 * ctx.canvas.height;\n        this.me.x = state[this.playerName].percentsX / 100 * ctx.canvas.width;\n        this.me.direction = this.state[this.playerName].direction;\n\n        // TODO: тут подпихиваем обновленный список продуктов\n        let productList = '';\n        this.state[this.playerName].targetList.forEach( (targetProduct) => {\n            productList += `${_ProductTypes_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"][targetProduct]}`;\n        });\n\n        this.gameInfo.setInfo({\n            score: this.state[this.playerName].score,\n            time: this.state.leftTime,\n            productList: productList,\n        });\n        this.gameInfo.render();\n\n        // выносим все элементы продуктов из пула за сцену\n        this.productFiguresPool.forEach( (product) => {\n            product.x = -100;\n            product.y = -100;\n            product.type = _ProductTypes_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].HIDDEN_POOL;\n        });\n        this.productPoolNext = 0;\n\n        const { productWidth, productHeight } = this.state;\n\n        // рисуем пришедшие из стейта данные о продуктах\n        this.state.products.forEach( (product) => {\n            const idx = this.productPoolNext;\n\n            if (idx >= this.productFiguresPool.length) {\n                console.error('Pool of productFigures out of range');\n                return;\n            }\n\n            this.productPoolNext += 1;\n\n            this.productFiguresPool[idx].x = (product.percentsX - productWidth / 2) / 100 * ctx.canvas.width;\n            // TODO проверить некст строку, возможно должен быть минус | <- вот тут\n            this.productFiguresPool[idx].y = (100 - (product.percentsY + productHeight / 2) ) / 100 * ctx.canvas.height;\n            this.productFiguresPool[idx].type = product.type;\n        });\n\n        // о собранных продуктах\n        this.state.collected.forEach( (collected) => {\n            const idx = this.collectedPoolNext;\n            this.collectedPoolUsing[idx] = true;\n            // console.log('idx:', idx, 'using:', this.collectedPoolUsing);\n            this.collectedPoolNext = this.collectedPoolUsing.indexOf(false);\n\n            if (idx >= this.collectedFiguresPool.length || idx < 0) {\n                console.error('Pool of collectedFigures out of range:', idx);\n                return;\n            }\n\n            this.collectedFiguresPool[idx].x = (collected.percentsX - productWidth / 2) / 100 * ctx.canvas.width;\n            this.collectedFiguresPool[idx].y = (100 - (collected.percentsY + productHeight / 2) ) / 100 * ctx.canvas.height;\n            this.collectedFiguresPool[idx].type = _ProductTypes_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].COLLECTED(collected.points);\n            // console.log('before', this.collectedFiguresPool[idx]);\n\n            setTimeout( () => {\n                // console.log('in timeout:', this.collectedFiguresPool[idx]);\n                this.collectedFiguresPool[idx].x = -100;\n                this.collectedFiguresPool[idx].y = -100;\n                this.collectedFiguresPool[idx].type = _ProductTypes_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].HIDDEN_POOL;\n                this.collectedPoolUsing[idx] = false;\n            }, 1 * 1000);\n        });\n    }\n\n    renderScene(now) {\n        const { ctx, scene } = this;\n        this.lastFrameTime = now;\n\n        scene.render();\n        this.requestFrameId = requestAnimationFrame(this.renderScene);\n    }\n\n    start() {\n        const gameSceneElement = document.querySelector('.game-scene');\n        const textSize = `${4 / 100 * this.ctx.canvas.height}px`;\n\n        this.gameInfo = new _GameInfoComponent_GameInfoComponent_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({ parentElem: gameSceneElement, textSize: textSize });\n        let productList = '';\n        this.state[this.playerName].targetList.forEach( (targetProduct) => {\n            productList += `${_ProductTypes_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"][targetProduct]}`;\n        });\n        this.gameInfo.setInfo({\n            score: this.state[this.playerName].score,\n            time: this.state.leftTime,\n            productList: productList,\n        });\n        this.gameInfo.render();\n        this.lastFrameTime = performance.now();\n        this.requestFrameId = requestAnimationFrame(this.renderScene);\n    }\n\n    stop() {\n        if (this.requestFrameId) {\n            window.cancelAnimationFrame(this.requestFrameId);\n            this.requestFrameId = null;\n        }\n        this.gameInfo.destroy();\n        this.scene.clear();\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/game/GameScene/GameScene.js?");

/***/ }),

/***/ "./public/app/game/GameScene/ImageFigure.js":
/*!**************************************************!*\
  !*** ./public/app/game/GameScene/ImageFigure.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ImageFigure; });\n/* harmony import */ var _modules_graphics_Figure_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../modules/graphics/Figure.js */ \"./public/app/modules/graphics/Figure.js\");\n\n\nclass ImageFigure extends _modules_graphics_Figure_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor(ctx, imagePath) {\n        super(ctx);\n        this.width = 0;\n        this.height = 0;\n        this.imagePath = imagePath;\n        this.image = new Image();\n        this.imageLoaded = false;\n        this.image.onload = () => {\n            this.imageLoaded = true;\n        };\n        this.image.src = this.imagePath;\n        this.direction = 'RIGHT';\n    }\n\n    /**\n     * @private\n     */\n    draw() {\n        if (this.imageLoaded) {\n            if (this.direction === 'RIGHT') {\n                this.flipImage(this.image, false);\n            } else if (this.direction === 'LEFT') {\n                this.flipImage(this.image, true);\n            }\n        }\n    }\n\n    setup() {}\n\n    flipImage(image, flipH) {\n        const scaleH = flipH ? -1 : 1; // Set horizontal scale to -1 if flip horizontal\n        // const posX = flipH ? -1 * (this.x + this.width / 2) : this.x - this.width / 2;\n        const posX = scaleH * this.x - this.width / 2;\n\n        this.ctx.save(); // Save the current state\n        this.ctx.scale(scaleH, 1); // Set scale to flip the image\n        this.ctx.drawImage(this.image, posX, this.y - this.height / 2, this.width, this.height);\n        this.ctx.restore(); // Restore the last saved state\n    }\n}\n\n//# sourceURL=webpack:///./public/app/game/GameScene/ImageFigure.js?");

/***/ }),

/***/ "./public/app/game/GameScene/Player.js":
/*!*********************************************!*\
  !*** ./public/app/game/GameScene/Player.js ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return GamePlayerFigure; });\n/* harmony import */ var _modules_graphics_Figure_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../modules/graphics/Figure.js */ \"./public/app/modules/graphics/Figure.js\");\n/* harmony import */ var _ImageFigure_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ImageFigure.js */ \"./public/app/game/GameScene/ImageFigure.js\");\n\n\n\nclass GamePlayerFigure extends _modules_graphics_Figure_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor(ctx, meWidth, meHeight) {\n        super(ctx);\n\n        this.body = new _ImageFigure_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this.ctx, 'app/game/GameScene/img/ketnipz.png');\n        this.bodyJump = new _ImageFigure_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this.ctx, 'app/game/GameScene/img/ketnipz_jump.png');\n        console.log(meWidth, meHeight);\n        this.body.width = meWidth;\n        this.body.height = meHeight;\n        this.bodyJump.width = meWidth;\n        this.bodyJump.height = meHeight;\n        this.jumping = false;\n        this.x = 0;\n        this.y = 0;\n        this.direction = 'RIGHT';\n    }\n\n    /**\n     * @private\n     */\n    draw() {\n        const { ctx } = this;\n        if (this.jumping) {\n            this.bodyJump.x = this.x;\n            this.bodyJump.y = this.y;\n            this.bodyJump.direction = this.direction;\n            this.bodyJump.render();\n        } else {\n            this.body.x = this.x;\n            this.body.y = this.y;\n            this.body.direction = this.direction;\n            this.body.render();\n        }\n    }\n\n    setup() {}\n}\n\n\n//# sourceURL=webpack:///./public/app/game/GameScene/Player.js?");

/***/ }),

/***/ "./public/app/game/GameScene/Product.js":
/*!**********************************************!*\
  !*** ./public/app/game/GameScene/Product.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return GameProductFigure; });\n/* harmony import */ var _modules_graphics_Figure_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../modules/graphics/Figure.js */ \"./public/app/modules/graphics/Figure.js\");\n/* harmony import */ var _ProductTypes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ProductTypes.js */ \"./public/app/game/GameScene/ProductTypes.js\");\n\n\n\nclass GameProductFigure extends _modules_graphics_Figure_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor(ctx) {\n        super(ctx);\n\n        // this.body = new ImageFigure(this.ctx, 'app/game/GameScene/ketnipz.png');\n        this.id = null;\n        this.x = 0;\n        this.y = 0;\n        this.direction = 'RIGHT';\n        this.type = 0;\n        this.text = _ProductTypes_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][this.type];\n        this.textSize = '40';\n    }\n\n    /**\n     * @private\n     */\n    draw() {\n        const { ctx } = this;\n        ctx.font = `${this.textSize}pt Arial`;\n        ctx.fillStyle = 'black';\n        this.text = _ProductTypes_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"][this.type];\n\n        ctx.fillText(this.text, this.x, this.y);\n        // this.body.x = this.x;\n        // this.body.y = this.y;\n        // this.body.direction = this.direction;\n        //\n        // this.body.render();\n    }\n\n    setup() {}\n}\n\n\n//# sourceURL=webpack:///./public/app/game/GameScene/Product.js?");

/***/ }),

/***/ "./public/app/game/GameScene/ProductTypes.js":
/*!***************************************************!*\
  !*** ./public/app/game/GameScene/ProductTypes.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nconst PRODUCTS = {\n    0: '\\uD83C\\uDF46', // 🍆\n    1: '\\uD83C\\uDF4E', // 🍎\n    2: '\\uD83C\\uDF49', // 🍉\n    3: '\\uD83C\\uDF55', // 🍕\n    4: '\\uD83C\\uDF6D', // 🍭\n    5: '\\uD83C\\uDF44', // 🍄\n    6: '\\uD83C\\uDF3D', // 🌽\n\n    EATEN_CORRECT: '+3',\n    EATEN_WRONG: '-1',\n\n    HIDDEN_POOL: '\\uD83D\\uDCA9', // 💩\n};\n\nPRODUCTS.COLLECTED = (points = 1) => {\n    const id = `COL_${points}`;\n    if (!PRODUCTS[id]) {\n        const sign = points >= 0 ? '+' : '';\n        PRODUCTS[id] = `${sign}${points}`;\n    }\n    return id;\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (PRODUCTS);\n\n\n//# sourceURL=webpack:///./public/app/game/GameScene/ProductTypes.js?");

/***/ }),

/***/ "./public/app/index.js":
/*!*****************************!*\
  !*** ./public/app/index.js ***!
  \*****************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _components_Button_Button_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./components/Button/Button.mjs */ \"./public/app/components/Button/Button.mjs\");\n/* harmony import */ var _components_ChatMini_ChatMini_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/ChatMini/ChatMini.mjs */ \"./public/app/components/ChatMini/ChatMini.mjs\");\n/* harmony import */ var _modules_Router_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./modules/Router.js */ \"./public/app/modules/Router.js\");\n/* harmony import */ var _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./modules/EventBus.js */ \"./public/app/modules/EventBus.js\");\n/* harmony import */ var _services_ScoreboardService_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./services/ScoreboardService.js */ \"./public/app/services/ScoreboardService.js\");\n/* harmony import */ var _services_SessionService_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./services/SessionService.js */ \"./public/app/services/SessionService.js\");\n/* harmony import */ var _services_UserService_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./services/UserService.js */ \"./public/app/services/UserService.js\");\n/* harmony import */ var _views_Scoreboard_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./views/Scoreboard.js */ \"./public/app/views/Scoreboard.js\");\n/* harmony import */ var _views_Menu_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./views/Menu.js */ \"./public/app/views/Menu.js\");\n/* harmony import */ var _views_Login_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./views/Login.js */ \"./public/app/views/Login.js\");\n/* harmony import */ var _views_Logout_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./views/Logout.js */ \"./public/app/views/Logout.js\");\n/* harmony import */ var _views_About_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./views/About.js */ \"./public/app/views/About.js\");\n/* harmony import */ var _views_Profile_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./views/Profile.js */ \"./public/app/views/Profile.js\");\n/* harmony import */ var _views_EditProfile_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./views/EditProfile.js */ \"./public/app/views/EditProfile.js\");\n/* harmony import */ var _views_SignUp_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./views/SignUp.js */ \"./public/app/views/SignUp.js\");\n/* harmony import */ var _views_GameView_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./views/GameView.js */ \"./public/app/views/GameView.js\");\n/* harmony import */ var _views_PreGame_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./views/PreGame.js */ \"./public/app/views/PreGame.js\");\n/* harmony import */ var _views_ChatView_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./views/ChatView.js */ \"./public/app/views/ChatView.js\");\n/* harmony import */ var _modules_PreLoad_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./modules/PreLoad.js */ \"./public/app/modules/PreLoad.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst renderChat = (parent) => {\n    const chat = new _components_ChatMini_ChatMini_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({ el: parent });\n    chat.render();\n\n    const chatButton = new _components_Button_Button_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n        el: parent,\n        className: 'app-router-ignore chat-mini-bth',\n        text: '\\uD83D\\uDCE9',\n    });\n    chatButton.on({\n        event: 'click',\n        callback: (event) => {\n            event.preventDefault();\n            chat.toggle();\n        },\n    });\n    chatButton.render();\n};\n\nconst startApp = () => {\n    const rootElement = document.querySelector('#root');\n    const router = new _modules_Router_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](rootElement);\n    router\n        .register('/', _views_Menu_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"])\n        .register('/login', _views_Login_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"])\n        .register('/logout', _views_Logout_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"])\n        .register('/about', _views_About_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"])\n        .register('/profile', _views_Profile_js__WEBPACK_IMPORTED_MODULE_12__[\"default\"])\n        .register('/profile/settings', _views_EditProfile_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"])\n        .register('/signup', _views_SignUp_js__WEBPACK_IMPORTED_MODULE_14__[\"default\"])\n        .register('/scoreboard', _views_Scoreboard_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"])\n        .register('/play', _views_GameView_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"])\n        .register('/screenchat', _views_ChatView_js__WEBPACK_IMPORTED_MODULE_17__[\"default\"])\n        .register('/pregame', _views_PreGame_js__WEBPACK_IMPORTED_MODULE_16__[\"default\"]);\n\n    renderChat(rootElement);\n    const iframe = document.querySelector('iframe');\n\n    _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].on('preload:loaded', () => { console.log('all gameImages loaded'); alert('all gameImages loaded'); });\n\n    const gameResources = [\n        'app/game/GameScene/img/ketnipz.png',\n        'app/game/GameScene/img/ketnipz_jump.png',\n        'app/game/GameScene/img/magaz.png',\n    ];\n    Object(_modules_PreLoad_js__WEBPACK_IMPORTED_MODULE_18__[\"default\"])(gameResources);\n\n    _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].on('loggedout', () => {\n        router.go('/login');\n    });\n\n    _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].on('tologin', () => {\n        router.go('/login');\n    });\n\n    _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].on('chat', () => {\n        router.go('/screenchat');\n    });\n\n    _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].on('tosignup', () => {\n        router.go('/signup');\n    });\n\n    _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].on('showmenu', () => {\n        router.go('/');\n    });\n\n    _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].on('editprofile', () => {\n        router.go('/profile/settings');\n    });\n\n    _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].on('showprofile', () => {\n        router.go('/profile');\n    });\n\n    // bus.on('fetch-user-state', async () => {\n    //     const data = await UserService.getUserState();\n    //     bus.emit('get-user-state', data);\n    // });\n\n    const getUser = async () => {\n        const data = await _services_UserService_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].getUserState();\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].emit('get-user-state', data);\n    };\n\n    getUser();\n\n\n    _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].on('fetch-user', async () => {\n        const data = await _services_UserService_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].getUser();\n        if (data.ok) {\n            const mes = {\n                type: 'set-user',\n                userId: data.user.id,\n                userNickName: data.user.nickname,\n            };\n            iframe.contentWindow.postMessage(JSON.stringify(mes), '*');\n            _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].emit('user:get-profile', data.user);\n        } else {\n            _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].emit('user:get-profile-err', data.err);\n        }\n    });\n\n    _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].on('fetch-logout', async () => {\n        await _services_SessionService_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].logout();\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].emit('loggedout');\n    });\n\n    _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].on('fetch-login', async (formData) => {\n        const data = await _services_SessionService_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].login(formData);\n        if (data.ok) {\n            _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].emit('showprofile');\n        } else {\n            _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].emit('session:login-err', data.err);\n        }\n    });\n\n    _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].on('fetch-signup-user', async (formData) => {\n        const data = await _services_UserService_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].signup(formData);\n        if (data.ok) {\n            _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].emit('showprofile');\n        } else {\n            _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].emit('user:signup-err', data.err);\n        }\n    });\n\n    _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].on('fetch-scoreboard', async () => {\n        const data = await _services_ScoreboardService_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getScoreboard();\n        if (data.ok) {\n            _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].emit('scoreboard:get-data', data.scoreboard);\n        } else {\n            alert('Что-то пошло не так.');\n            _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].emit('showmenu');\n        }\n    });\n\n    _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].on('fetch-page-scoreboard', async ({ limit, page }) => {\n        const data = await _services_ScoreboardService_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getScoreboard({ limit: limit, page: page });\n        if (data.ok) {\n            _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].emit('scoreboard:get-page', data.scoreboard);\n        } else {\n            alert('Что-то пошло не так.');\n            _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].emit('showmenu');\n        }\n    });\n\n\n    _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].on('fetch-update-user', async ({ formData, user }) => {\n        const data = await _services_UserService_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].update(formData, user);\n        if (data.ok) {\n            _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].emit('showprofile');\n        } else {\n            _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].emit('user:update-err', data.err);\n        }\n    });\n\n\n    router.start();\n};\n\nstartApp();\n\n\n//# sourceURL=webpack:///./public/app/index.js?");

/***/ }),

/***/ "./public/app/modules/AjaxFetch.mjs":
/*!******************************************!*\
  !*** ./public/app/modules/AjaxFetch.mjs ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(__webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return AjaxFetchModule; });\nclass AjaxFetchModule {\n    static _ajax({\n        method = 'GET', path = '/', domain = '', contentType = null, body,\n    } = {}) {\n        const url = domain + path;\n\n        const options = {\n            mode: 'cors',\n            credentials: 'include',\n            method: method,\n        };\n\n        if (body) {\n            if (contentType === null) {\n                options.headers = { 'Content-Type': 'application/json; charset=utf-8' };\n                options.body = JSON.stringify(body);\n            } else {\n                options.headers = { 'Content-Type': contentType };\n                options.body = body;\n            }\n        }\n\n        return fetch(url, options);\n    }\n\n    static doGet(params = {}) {\n        return this._ajax({ ...params, method: 'GET' });\n    }\n\n    static doPost(params = {}) {\n        return this._ajax({ ...params, method: 'POST' });\n    }\n\n    static doDelete(params = {}) {\n        return this._ajax({ ...params, method: 'DELETE' });\n    }\n\n    static doPut(params = {}) {\n        return this._ajax({ ...params, method: 'PUT' });\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/modules/AjaxFetch.mjs?");

/***/ }),

/***/ "./public/app/modules/EventBus.js":
/*!****************************************!*\
  !*** ./public/app/modules/EventBus.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nclass EventBus {\n    constructor() {\n        this.listeners = {};\n    }\n\n    on(event, callback) {\n        if (!this.listeners[event]) {\n            this.listeners[event] = [];\n        }\n        this.listeners[event].push(callback);\n        return this;\n    }\n\n    off(event, callback) {\n        if (this.listeners[event]) {\n            this.listeners[event] = this.listeners[event].filter(listener => listener !== callback);\n        }\n        return this;\n    }\n\n    emit(event, data) {\n        if (this.listeners[event]) {\n            this.listeners[event].forEach(listener => listener(data) );\n        }\n        return this;\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (new EventBus());\n\n\n//# sourceURL=webpack:///./public/app/modules/EventBus.js?");

/***/ }),

/***/ "./public/app/modules/PreLoad.js":
/*!***************************************!*\
  !*** ./public/app/modules/PreLoad.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _EventBus_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EventBus.js */ \"./public/app/modules/EventBus.js\");\n\n\nconst preLoad = (resources) => {\n    let loaded = 0;\n    resources.forEach( (path) => {\n        const img = new Image();\n        img.onload = () => {\n            loaded += 1;\n            if (loaded === resources.length) {\n                _EventBus_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].emit('preload:loaded');\n            }\n        };\n        img.src = path;\n    });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (preLoad);\n\n\n//# sourceURL=webpack:///./public/app/modules/PreLoad.js?");

/***/ }),

/***/ "./public/app/modules/Router.js":
/*!**************************************!*\
  !*** ./public/app/modules/Router.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Router; });\n/*\n* @class Router\n* @module modules\n*/\nclass Router {\n    constructor(root) {\n        this.root = root;\n        this.routes = {};\n    }\n\n    /*\n    * @param {string} path\n    * @param {View} view\n    */\n    register(path, View) {\n        this.routes[path] = {\n            View: View,\n            view: null,\n            el: null,\n        };\n\n        return this;\n    }\n\n    /*\n    * @param {string} path - Путь, по которому собираемся перейти\n    */\n    go(path) {\n        const route = this.routes[path];\n\n        if (!route) {\n            this.go('/');\n            return;\n        }\n\n        if (window.location.pathname !== path) {\n            window.history.pushState(null, '', path);\n        }\n\n        let { View, view, el } = this.routes[path];\n\n        if (!el) {\n            el = document.createElement('section');\n            this.root.appendChild(el);\n        }\n\n        if (!view) {\n            view = new View(el);\n        }\n\n        if (!view.isActive) {\n            Object.values(this.routes).forEach( ({ view: otherView }) => {\n                if (otherView && otherView.isActive) {\n                    otherView.hide();\n                }\n            });\n\n            view.show();\n        }\n\n        this.routes[path] = { View, view, el };\n    }\n\n    back() {\n        window.history.back();\n    }\n\n    forward() {\n        window.history.forward();\n    }\n\n    start() {\n        this.root.addEventListener('click', (event) => {\n            // TODO: создать CSS-класс для ссылок, отвечающих за переходы между вью,\n            // TODO: и проверять на его наличие, а не просто навешивать на все ссылки\n            if (!(event.target instanceof HTMLAnchorElement) ) {\n                return;\n            }\n            if (event.target.classList.contains('app-router-ignore')) {\n                return;\n            }\n\n            event.preventDefault();\n            const link = event.target;\n\n            this.go(link.pathname);\n        });\n\n        window.addEventListener('popstate', () => {\n            const currentPath = window.location.pathname;\n            this.go(currentPath);\n        });\n\n        const currentPath = window.location.pathname;\n        this.go(currentPath);\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/modules/Router.js?");

/***/ }),

/***/ "./public/app/modules/User.mjs":
/*!*************************************!*\
  !*** ./public/app/modules/User.mjs ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(__webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _EventBus_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EventBus.js */ \"./public/app/modules/EventBus.js\");\n\n\nclass User {\n    constructor() {\n        this.user = null;\n        this.exist = false;\n        _EventBus_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].on('get-user-state', this.setUser.bind(this) );\n        // bus.emit('fetch-user-state');\n    }\n\n    isAuth() {\n        return this.user !== null;\n    }\n\n    isExist() {\n        return this.exist;\n    }\n\n    deleteUser() {\n        this.user = null;\n    }\n\n    setUser(data) {\n        this.user = data;\n        this.exist = true;\n        _EventBus_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].emit('user-state-set');\n    }\n\n    getUser() {\n        return this.user;\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (new User());\n\n\n//# sourceURL=webpack:///./public/app/modules/User.mjs?");

/***/ }),

/***/ "./public/app/modules/Utils.mjs":
/*!**************************************!*\
  !*** ./public/app/modules/Utils.mjs ***!
  \**************************************/
/*! exports provided: createElementFromHTML, noop, randInt */
/***/ (function(__webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createElementFromHTML\", function() { return createElementFromHTML; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"noop\", function() { return noop; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"randInt\", function() { return randInt; });\nconst createElementFromHTML = (htmlString) => {\n    const div = document.createElement('div');\n    div.innerHTML = htmlString.trim();\n    return div.firstChild;\n};\n\nconst noop = () => null;\n\nconst randInt = (min, max) => {\n    const rand = min - 0.5 + Math.random() * (max - min + 1);\n    return Math.round(rand);\n};\n\n//# sourceURL=webpack:///./public/app/modules/Utils.mjs?");

/***/ }),

/***/ "./public/app/modules/fullscreenAPI/fullscreen.js":
/*!********************************************************!*\
  !*** ./public/app/modules/fullscreenAPI/fullscreen.js ***!
  \********************************************************/
/*! exports provided: default, exitFullscreen */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return launchFullscreen; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"exitFullscreen\", function() { return exitFullscreen; });\n// Find the right method, call on correct element\nfunction launchFullscreen(element) {\n    if (element.requestFullscreen) {\n        element.requestFullscreen();\n    } else if (element.mozRequestFullScreen) {\n        element.mozRequestFullScreen();\n    } else if (element.webkitRequestFullscreen) {\n        element.webkitRequestFullscreen();\n    } else if (element.msRequestFullscreen) {\n        element.msRequestFullscreen();\n    }\n}\n\nfunction exitFullscreen() {\n    if (document.exitFullscreen) {\n        document.exitFullscreen();\n    } else if (document.mozCancelFullScreen) {\n        document.mozCancelFullScreen();\n    } else if (document.webkitExitFullscreen) {\n        document.webkitExitFullscreen();\n    }\n}\n\n// function dumpFullscreen() {\n//     console.log(\"document.fullscreenElement is: \", document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement);\n//     console.log(\"document.fullscreenEnabled is: \", document.fullscreenEnabled || document.mozFullScreenEnabled || document.webkitFullscreenEnabled || document.msFullscreenEnabled);\n// }\n//\n// // Events\n// document.addEventListener(\"fullscreenchange\", function(e) {\n//     console.log(\"fullscreenchange event! \", e);\n// });\n// document.addEventListener(\"mozfullscreenchange\", function(e) {\n//     console.log(\"mozfullscreenchange event! \", e);\n// });\n// document.addEventListener(\"webkitfullscreenchange\", function(e) {\n//     console.log(\"webkitfullscreenchange event! \", e);\n// });\n// document.addEventListener(\"msfullscreenchange\", function(e) {\n//     console.log(\"msfullscreenchange event! \", e);\n// });\n\n//# sourceURL=webpack:///./public/app/modules/fullscreenAPI/fullscreen.js?");

/***/ }),

/***/ "./public/app/modules/graphics/Figure.js":
/*!***********************************************!*\
  !*** ./public/app/modules/graphics/Figure.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Figure; });\nclass Figure {\n    constructor(ctx) {\n        this.ctx = ctx;\n        this.x = 0;\n        this.y = 0;\n    }\n\n    render() {\n        this.ctx.save();\n        this.setup();\n        this.draw();\n        this.ctx.restore();\n    }\n\n    /*\n    *  @abstract\n    */\n    draw() {\n        const { ctx } = this;\n        ctx.rect(this.x, this.y, 50, 50);\n    }\n\n    setup() {}\n}\n\n//# sourceURL=webpack:///./public/app/modules/graphics/Figure.js?");

/***/ }),

/***/ "./public/app/modules/graphics/Scene.js":
/*!**********************************************!*\
  !*** ./public/app/modules/graphics/Scene.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Scene; });\nclass Scene {\n    constructor(ctx) {\n        this.ctx = ctx;\n        this.frontView = [];\n        this.backView = [];\n        this.figures = {};\n\n        this._curFigureID = 0;\n    }\n\n    getNextFigureID() {\n        return `#${ this._curFigureID++ }`;\n    }\n\n    push(figure) {\n        const id = this.getNextFigureID();\n        this.figures[id] = figure;\n        this.frontView.push(figure);\n\n        return id;\n    }\n\n    toFront(id) {\n        const figure = this.figures[id];\n        this.backView = this.backView.filter( (item) => {\n            return item !== figure;\n        });\n        this.frontView = this.frontView.filter( (item) => {\n            return item !== figure;\n        });\n        this.frontView.push(figure);\n    }\n\n    toBack(id) {\n        const figure = this.figures[id];\n        this.backView = this.backView.filter( (item) => {\n            return item !== figure;\n        });\n        this.frontView = this.frontView.filter( (item) => {\n            return item !== figure;\n        });\n        this.backView.push(figure);\n    }\n\n    removeFigure(id) {\n        const figure = this.figures[id];\n        this.backView = this.backView.filter( (item) => {\n            return item !== figure;\n        });\n        this.frontView = this.frontView.filter( (item) => {\n            return item !== figure;\n        });\n\n        delete this.figures[id];\n        if (Object.keys(this.figures).length === 0) {\n            console.log('Scene is empty!');\n        }\n    }\n\n    render() {\n        const { ctx } = this;\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        this.backView.forEach( figure => figure.render() );\n        this.frontView.forEach( figure => figure.render() );\n    }\n\n    clear() {\n        const { ctx } = this;\n        // for (let figure in this.figures) {\n        //     this.removeFigure(figure.id);\n        // }\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/modules/graphics/Scene.js?");

/***/ }),

/***/ "./public/app/projectSettings.js":
/*!***************************************!*\
  !*** ./public/app/projectSettings.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nconst backDomain = 'https://playketnipz.ru';\n/* harmony default export */ __webpack_exports__[\"default\"] = (backDomain);\n\n\n//# sourceURL=webpack:///./public/app/projectSettings.js?");

/***/ }),

/***/ "./public/app/services/ScoreboardService.js":
/*!**************************************************!*\
  !*** ./public/app/services/ScoreboardService.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ScoreboardService; });\n/* harmony import */ var _modules_AjaxFetch_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../modules/AjaxFetch.mjs */ \"./public/app/modules/AjaxFetch.mjs\");\n/* harmony import */ var _projectSettings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../projectSettings.js */ \"./public/app/projectSettings.js\");\n\n\n\nclass ScoreboardService {\n    /**\n     Разлогинить пользователя\n     * @param limit, page\n     * @return {Promise} response\n     */\n    static async getScoreboard({ limit = 5, page = 0 } = {}) {\n        const data = {\n            scoreboard: null,\n            ok: false,\n        };\n\n        let response = null;\n\n        if (page === 0) {\n            response = await this.fetchScoreboard();\n        } else {\n            response = await this.fetchPageScoreboard(limit, page);\n        }\n\n        if (response.status !== 200) {\n            return data;\n        }\n\n        data.scoreboard = await response.json();\n        data.ok = true;\n\n        return data;\n    }\n\n    static fetchScoreboard() {\n        return _modules_AjaxFetch_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"]\n            .doGet({\n                path: '/scoreboard?limit=5',\n                domain: _projectSettings_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n            });\n    }\n\n    static fetchPageScoreboard(limit, page) {\n        return _modules_AjaxFetch_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"]\n            .doGet({\n                path: `/scoreboard?limit=${limit}&page=${page}`,\n                domain: _projectSettings_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n            });\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/services/ScoreboardService.js?");

/***/ }),

/***/ "./public/app/services/SessionService.js":
/*!***********************************************!*\
  !*** ./public/app/services/SessionService.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SessionService; });\n/* harmony import */ var _modules_AjaxFetch_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../modules/AjaxFetch.mjs */ \"./public/app/modules/AjaxFetch.mjs\");\n/* harmony import */ var _modules_User_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../modules/User.mjs */ \"./public/app/modules/User.mjs\");\n/* harmony import */ var _projectSettings_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../projectSettings.js */ \"./public/app/projectSettings.js\");\n\n\n\n\nclass SessionService {\n    /**\n     Разлогинить пользователя\n     * @return {Promise} response\n     */\n    static async logout() {\n        const response = await this.fetchLogout();\n\n        if (response.status === 200) {\n            _modules_User_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].deleteUser();\n        }\n\n        return response;\n    }\n\n    /**\n     Авторизация пользователя\n     * @param formData\n     * @return Object data\n     */\n    static async login(formData) {\n        const data = {\n            err: {\n                status: 200,\n                errors: [],\n            },\n            ok: false,\n        };\n\n        const email = formData.email.value;\n        const password = formData.password.value;\n\n        if (!(email && password) ) {\n            data.err.errors.push({\n                text: 'Заполните оба поля!',\n            });\n            return data;\n        }\n\n        const req = {\n            email: email,\n            password: password,\n        };\n\n        const response = await this.fetchLogin(req);\n\n        if (response.status === 422) {\n            data.err.status = response.status;\n            data.err.errors.push({\n                text: 'Неверная пара почта/пароль',\n            });\n            return data;\n        }\n\n        if (response.status !== 200) {\n            data.err.status = response.status;\n            data.err.errors.push({\n                text: 'Что-то пошло не так!',\n            });\n            return data;\n        }\n\n        data.ok = true;\n        return data;\n    }\n\n    static fetchLogin(req = {}) {\n        return _modules_AjaxFetch_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"]\n            .doPost({\n                path: '/session',\n                domain: _projectSettings_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"],\n                body: req,\n            });\n    }\n\n    static fetchLogout() {\n        return _modules_AjaxFetch_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"]\n            .doDelete({\n                path: '/session',\n                domain: _projectSettings_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"],\n            });\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/services/SessionService.js?");

/***/ }),

/***/ "./public/app/services/UserService.js":
/*!********************************************!*\
  !*** ./public/app/services/UserService.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return UserService; });\n/* harmony import */ var _projectSettings_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../projectSettings.js */ \"./public/app/projectSettings.js\");\n/* harmony import */ var _modules_AjaxFetch_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../modules/AjaxFetch.mjs */ \"./public/app/modules/AjaxFetch.mjs\");\n/* harmony import */ var _modules_User_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../modules/User.mjs */ \"./public/app/modules/User.mjs\");\n\n\n\n\nclass UserService {\n    /**\n     Получить данные пользователя для модуля User\n     * @return user\n     */\n    static async getUserState() {\n        const response = await this.fetchUser();\n\n        if (response.status !== 200) {\n            return null;\n        }\n\n        const user = await response.json();\n        return user;\n    }\n\n    /**\n     Получить данные о пользователя по ID\n     * @param id\n     * @return user\n     */\n    static async getUserByID(id) {\n        const data = {\n            user: null,\n            ok: false,\n        };\n\n        const response = await this.fetchUserByID(id);\n        if (response.status !== 200) {\n            return data;\n        }\n        data.user = await response.json();\n        data.ok = true;\n        return data;\n    }\n\n    /**\n     Получить данные о пользователе\n     * @return Object data\n     */\n    static async getUser() {\n        const data = {\n            user: null,\n            err: {\n                status: 200,\n                text: null,\n            },\n            ok: false,\n        };\n\n        if (_modules_User_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isAuth() ) {\n            console.log('юзер есть', _modules_User_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n            data.user = _modules_User_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getUser();\n            data.ok = true;\n            return data;\n        }\n\n        const response = await this.fetchUser();\n\n        if (response.status === 401) {\n            data.err.status = 401;\n            data.err.text = 'Надо авторизоваться!';\n            return data;\n        }\n\n        if (response.status !== 200) {\n            data.err.status = response.status;\n            data.err.text = 'Что-то пошло не так!';\n            return data;\n        }\n\n        data.user = await response.json();\n        data.ok = true;\n\n        _modules_User_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].setUser(data.user);\n\n        return data;\n    }\n\n    /**\n     Зарегестрировать нового пользователя\n     * @param formData\n     * @return Object data\n     */\n    static async signup(formData) {\n        const data = {\n            err: {\n                status: 200,\n                errors: [],\n            },\n            ok: false,\n        };\n\n        const email = formData.email.value;\n        const nickname = formData.nickname.value;\n        const password = formData.password.value;\n        const passwordRepeat = formData.password_repeat.value;\n\n        if (password !== passwordRepeat) {\n            data.err.errors.push({\n                text: 'Пароли не совпадают',\n            });\n            return data;\n        }\n\n        if (!(email && password && passwordRepeat && nickname) ) {\n            data.err.errors.push({\n                text: 'Заполните все поля!',\n            });\n            return data;\n        }\n\n        const req = {\n            email: email,\n            nickname: nickname,\n            password: password,\n        };\n\n        const response = await this.fetchSignUpUser(req);\n\n        if (response.status === 403) {\n            const body = await response.json();\n            data.err.errors = body.error;\n            return data;\n        }\n\n        if (response.status !== 200) {\n            data.err.status = response.status;\n            data.err.errors.push({\n                text: 'Что-то пошло не так!',\n            });\n            return data;\n        }\n\n        data.ok = true;\n        return data;\n    }\n\n    /**\n     Обновить данные о пользователе\n     * @param formData, user\n     * @return Object data\n     */\n    static async update(formData, user) {\n        const data = {\n            err: {\n                mainErr: null,\n                errors: [],\n            },\n            ok: false,\n        };\n\n        const email = formData.email.value;\n        const nickname = formData.nickname.value;\n        const password = formData.password.value;\n        const passwordRepeat = formData.password_repeat.value;\n\n        const req = {};\n\n        if (email !== user.email && email) {\n            req.email = email;\n        }\n\n        if (nickname !== user.nickname && nickname) {\n            req.nickname = nickname;\n        }\n\n        if (password) {\n            if (password !== passwordRepeat) {\n                data.err.errors.push({\n                    text: 'Пароли не совпадают',\n                });\n                return data;\n            }\n            req.password = password;\n        }\n\n        if (Object.keys(req).length === 0) {\n            return data;\n        }\n\n        const response = await this.fetchUpdateUpUser(req);\n\n        if (response.status === 403) {\n            const body = await response.json();\n            data.err.errors = body.error;\n            return data;\n        }\n\n        if (response.status === 401) {\n            data.err.mainErr = 'Надо авторизоваться!';\n            console.log(data);\n            return data;\n        }\n\n        if (response.status !== 200) {\n            data.err.mainErr = 'Что-то пошло не так!';\n            return data;\n        }\n\n        _modules_User_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].deleteUser();\n        data.ok = true;\n        return data;\n    }\n\n    static fetchUser() {\n        return _modules_AjaxFetch_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"]\n            .doGet({\n                path: '/profile',\n                domain: _projectSettings_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"],\n            });\n    }\n\n    static fetchSignUpUser(req = {}) {\n        return _modules_AjaxFetch_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"]\n            .doPost({\n                path: '/profile',\n                domain: _projectSettings_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"],\n                body: req,\n            });\n    }\n\n    static fetchUserByID(id) {\n        return _modules_AjaxFetch_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"]\n            .doGet({\n                path: `/profile?id=${id}`,\n                domain: _projectSettings_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"],\n            });\n    }\n\n    static fetchUpdateUpUser(req = {}) {\n        return _modules_AjaxFetch_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"]\n            .doPut({\n                path: '/profile',\n                domain: _projectSettings_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"],\n                body: req,\n            });\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/services/UserService.js?");

/***/ }),

/***/ "./public/app/views/About.js":
/*!***********************************!*\
  !*** ./public/app/views/About.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return AboutView; });\n/* harmony import */ var _Base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base.js */ \"./public/app/views/Base.js\");\n/* harmony import */ var _components_Section_Section_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/Section/Section.mjs */ \"./public/app/components/Section/Section.mjs\");\n/* harmony import */ var _components_About_About_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/About/About.mjs */ \"./public/app/components/About/About.mjs\");\n/* harmony import */ var _components_Button_Button_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/Button/Button.mjs */ \"./public/app/components/Button/Button.mjs\");\n\n\n\n\n\n\nclass AboutView extends _Base_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    render() {\n        super.render();\n        const content = this._el.querySelector('.content');\n\n        const aboutSection = new _components_Section_Section_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({ el: content, name: 'about' });\n        aboutSection.render();\n        const aboutSectionContent = aboutSection.sectionContent;\n\n        const about = new _components_About_About_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({ el: aboutSectionContent });\n        about.render();\n\n        const menuButton = new _components_Button_Button_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({ el: aboutSectionContent });\n        menuButton.render();\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/views/About.js?");

/***/ }),

/***/ "./public/app/views/Base.js":
/*!**********************************!*\
  !*** ./public/app/views/Base.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return BaseView; });\n/* harmony import */ var _View_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./View.js */ \"./public/app/views/View.js\");\n/* harmony import */ var _components_Link_Link_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/Link/Link.mjs */ \"./public/app/components/Link/Link.mjs\");\n\n\n\n/*\n* @class BaseView - для создания вьюх, предпологающих наличие \"рыбы\" с позиционированием и тд\n* @module Views\n*/\nclass BaseView extends _View_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    render() {\n        this._el.innerHTML = `\n            <div class=\"container\">\n                <div class=\"content\">\n                    <div class=\"game_title\">\n                    </div>\n                </div>\n            </div>\n        `.trim();\n        const gameTitle = this._el.querySelector('.game_title');\n\n        const h1 = document.createElement('h1');\n        h1.className = 'game_title__h';\n        gameTitle.appendChild(h1);\n\n        const gameTitleLink = new _components_Link_Link_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n            el: h1,\n            text: 'Abstract Ketnipz',\n            href: '/',\n            className: 'game_title__link',\n        });\n        gameTitleLink.render();\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/views/Base.js?");

/***/ }),

/***/ "./public/app/views/ChatView.js":
/*!**************************************!*\
  !*** ./public/app/views/ChatView.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ChatView; });\n/* harmony import */ var _components_Button_Button_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/Button/Button.mjs */ \"./public/app/components/Button/Button.mjs\");\n/* harmony import */ var _Base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Base.js */ \"./public/app/views/Base.js\");\n/* harmony import */ var _components_Section_Section_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/Section/Section.mjs */ \"./public/app/components/Section/Section.mjs\");\n\n\n\n\n\n\nclass ChatView extends _Base_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    render() {\n        super.render();\n        const content = this._el.querySelector('.content');\n\n        const chatSection = new _components_Section_Section_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({ el: content, name: 'login' });\n        chatSection.render();\n        const chatSectionContent = chatSection.sectionContent;\n\n        this.iframe = document.createElement('iframe');\n        this.iframe.setAttribute('width', '1000');\n        this.iframe.setAttribute('height', '400');\n        this.iframe.setAttribute('src', 'app/chat/chat.html');\n        chatSectionContent.appendChild(this.iframe);\n\n        const button = document.querySelector('.chat-mini-bth');\n        const style = button.style.display;\n        button.style.display = 'none';\n\n        const menuButton = new _components_Button_Button_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({ el: chatSectionContent });\n        menuButton.on({\n            event: 'click',\n            callback: (event) => {\n                event.preventDefault();\n                button.style.display = style;\n            },\n        });\n        menuButton.render();\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/views/ChatView.js?");

/***/ }),

/***/ "./public/app/views/EditProfile.js":
/*!*****************************************!*\
  !*** ./public/app/views/EditProfile.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return EditProfileView; });\n/* harmony import */ var _components_Error_Error_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/Error/Error.mjs */ \"./public/app/components/Error/Error.mjs\");\n/* harmony import */ var _modules_AjaxFetch_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../modules/AjaxFetch.mjs */ \"./public/app/modules/AjaxFetch.mjs\");\n/* harmony import */ var _projectSettings_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../projectSettings.js */ \"./public/app/projectSettings.js\");\n/* harmony import */ var _Base_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Base.js */ \"./public/app/views/Base.js\");\n/* harmony import */ var _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../modules/EventBus.js */ \"./public/app/modules/EventBus.js\");\n/* harmony import */ var _components_Section_Section_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/Section/Section.mjs */ \"./public/app/components/Section/Section.mjs\");\n/* harmony import */ var _components_Form_Form_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/Form/Form.mjs */ \"./public/app/components/Form/Form.mjs\");\n/* harmony import */ var _components_Button_Button_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/Button/Button.mjs */ \"./public/app/components/Button/Button.mjs\");\n/* harmony import */ var _components_Loader_Loader_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/Loader/Loader.js */ \"./public/app/components/Loader/Loader.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass EditProfileView extends _Base_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"] {\n    constructor(el) {\n        super(el);\n\n        this.form = null;\n\n        this.user = null;\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].on('user:get-profile', this.setUser.bind(this) );\n\n        this.error = null;\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].on('user:get-profile-err', this.setError.bind(this) );\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].on('user:update-err', this.setErrorUpdate.bind(this) );\n    }\n\n    setError(err) {\n        this.error = err.text;\n        this.render();\n    }\n\n    setErrorUpdate(err) {\n        this.error = err.mainErr;\n        if (this.error !== null) {\n            this.render();\n        } else {\n            this.form.showErrors(err.errors);\n        }\n    }\n\n    show() {\n        super.show();\n        this.fetchUser();\n    }\n\n    fetchUser() {\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].emit('fetch-user');\n    }\n\n    fetchUpdate(formData) {\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].emit('fetch-update-user', { formData: formData, user: this.user });\n    }\n\n    setUser(user) {\n        this.user = user;\n        this.render();\n    }\n\n    render() {\n        super.render();\n        const content = this._el.querySelector('.content');\n\n        const editProfileSection = new _components_Section_Section_mjs__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({ el: content, name: 'edit_profile' });\n        editProfileSection.render();\n        const editSectionContent = editProfileSection.sectionContent;\n\n        const changingBlock = document.createElement('div');\n        editSectionContent.appendChild(changingBlock);\n\n        const profileButton = new _components_Button_Button_mjs__WEBPACK_IMPORTED_MODULE_7__[\"default\"]({\n            el: editSectionContent,\n            href: '/profile',\n            text: 'Назад',\n        });\n        profileButton.render();\n\n        if (!this.user && !this.error) {\n            this.renderLoading(changingBlock);\n        } else if (this.error) {\n            this.renderError(editSectionContent);\n            this.error = null;\n        } else {\n            this.renderForm(changingBlock);\n        }\n    }\n\n    renderForm(parent) {\n        this.form = new _components_Form_Form_mjs__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({\n            el: parent,\n            inputs: this.inputs,\n            header: 'Настройки профиля',\n            // TODO указать правильный name\n            name: 'signup',\n            multipart: true,\n        });\n        this.form.render();\n\n        this.form.on({\n            event: 'submit',\n            callback: (event) => {\n                event.preventDefault();\n                this.form.hideErrors();\n\n                const formData = this.form.innerElem.elements;\n                const f = this.form.innerElem;\n                //\n                // const а = new FormData(formData);\n                // console.log(a);\n\n                console.log('edit profile');\n                console.log(formData);\n                console.log(f);\n\n                const userAvatar = formData.avatar;\n\n                if (userAvatar) {\n                    console.log('ecnm');\n                    console.log(userAvatar);\n                } else {\n                    console.log('no');\n                }\n\n                if (userAvatar.value === '') {\n                    console.log('пусто');\n                } else {\n                    console.log('ytn');\n                    console.log(formData.avatar.files[0]);\n                    console.log(formData.avatar.name);\n                }\n\n                if (userAvatar.value !== '') {\n                    console.log('avatar block');\n                    console.log(userAvatar.value);\n                    // // && this.user.avatar !== userAvatar\n                    //     console.log(userAvatar);\n                    const avatarData = new FormData();\n                    const newAvatar = formData.avatar.files[0];\n                    avatarData.append('avatar', newAvatar);\n\n                    _modules_AjaxFetch_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"]\n                        .doPut({\n                            path: '/profile/avatar',\n                            domain: _projectSettings_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"],\n                            contentType: 'multipart/form-data',\n                            body: avatarData,\n                        })\n                        .then( (response) => {\n                            console.log(response.status);\n                        })\n                        .catch( (err) => {\n                            console.log(err);\n                        });\n                }\n\n                this.fetchUpdate(formData);\n            },\n        });\n    }\n\n    renderLoading(parent) {\n        const loader = new _components_Loader_Loader_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"](parent);\n        loader.render();\n    }\n\n    renderError(parent) {\n        const errorBlock = new _components_Error_Error_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n            el: parent,\n            error: this.error,\n        });\n\n        errorBlock.render();\n    }\n\n    get inputs() {\n        return [\n            {\n                name: 'nickname',\n                type: 'text',\n                placeholder: this.user.nickname,\n                className: 'bordered_input',\n            },\n            {\n                name: 'email',\n                type: 'email',\n                placeholder: this.user.email,\n                className: 'bordered_input',\n            },\n            {\n                name: 'password',\n                type: 'password',\n                placeholder: 'Пароль',\n                className: 'bordered_input',\n            },\n            {\n                name: 'password_repeat',\n                type: 'password',\n                placeholder: 'Повторите пароль',\n                className: 'bordered_input',\n            },\n            {\n                name: 'avatar',\n                type: 'file',\n                accept: 'image/jpeg,image/png',\n                className: 'bordered_input',\n            },\n            {\n                name: 'submit',\n                type: 'submit',\n                className: 'cute-btn',\n                value: 'Сохранить',\n            },\n        ];\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/views/EditProfile.js?");

/***/ }),

/***/ "./public/app/views/GameView.js":
/*!**************************************!*\
  !*** ./public/app/views/GameView.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return GameView; });\n/* harmony import */ var _Base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base.js */ \"./public/app/views/Base.js\");\n/* harmony import */ var _components_Button_Button_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/Button/Button.mjs */ \"./public/app/components/Button/Button.mjs\");\n/* harmony import */ var _components_Section_Section_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/Section/Section.mjs */ \"./public/app/components/Section/Section.mjs\");\n/* harmony import */ var _game_GameModes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../game/GameModes.js */ \"./public/app/game/GameModes.js\");\n/* harmony import */ var _game_Game_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../game/Game.js */ \"./public/app/game/Game.js\");\n/* harmony import */ var _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../modules/EventBus.js */ \"./public/app/modules/EventBus.js\");\n/* harmony import */ var _modules_fullscreenAPI_fullscreen_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../modules/fullscreenAPI/fullscreen.js */ \"./public/app/modules/fullscreenAPI/fullscreen.js\");\n/* harmony import */ var _game_GameScene_FinishGameComponent_FinishGameComponent_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../game/GameScene/FinishGameComponent/FinishGameComponent.js */ \"./public/app/game/GameScene/FinishGameComponent/FinishGameComponent.js\");\n\n\n\n\n\n\n\n\n\nclass GameView extends _Base_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor(el) {\n        super(el);\n        this.canvas = null;\n\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].on('CLOSE GAME', (scores) => {\n            this.destroy();\n            _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].emit('showmenu');\n        });\n    }\n\n    show() {\n        this._el.hidden = false;\n        this.render();\n    }\n\n    render() {\n        super.render();\n        const content = this._el.querySelector('.content');\n        const title = this._el.querySelector('.game_title');\n        content.removeChild(title);\n\n        const gameSection = new _components_Section_Section_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({ el: content, name: 'game' });\n        gameSection.render();\n        gameSection.sectionContent.insertAdjacentHTML('beforeend', `\n            <div class=\"game-scene\">\n                <div class=\"game-canvas__background\"></div>\n                <canvas class=\"js-canvas game-view__canvas game-canvas\" width=\"600\" height=\"400\"></canvas>\n            </div>\n        `);\n\n        const finishComponent = new _game_GameScene_FinishGameComponent_FinishGameComponent_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"]({ el: gameSection.sectionContent });\n\n        const scene = this._el.querySelector('.game-scene');\n        this.canvas = this._el.querySelector('.js-canvas');\n        // console.log(`Scene: (${window.innerWidth}, ${window.innerHeight}) Canvas: (${this.canvas.width}, ${this.canvas.height}) `);\n\n        const mql = window.matchMedia('only screen and (orientation: portrait)');\n        if (mql.matches) {\n            // Портретная ориентация\n            console.log('port');\n            this.canvas.width = window.innerHeight;\n            this.canvas.height = window.innerWidth;\n        } else {\n            // Горизонтальная ориентация\n            console.log('goriz');\n            this.canvas.width = window.innerWidth;\n            this.canvas.height = window.innerHeight;\n        }\n\n        const documentEl = document.documentElement;\n        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent)) {\n            // Take the user to a different screen here.\n            Object(_modules_fullscreenAPI_fullscreen_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(documentEl);\n        }\n        this.createGame();\n        const backButton = new _components_Button_Button_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({ el: scene, className: 'cute-btn app-router-ignore game-scene__back-button' });\n        backButton.on({\n            event: 'click',\n            callback: (event) => {\n                event.preventDefault();\n                console.log('destroyCALLBACK');\n                this.destroy();\n                Object(_modules_fullscreenAPI_fullscreen_js__WEBPACK_IMPORTED_MODULE_6__[\"exitFullscreen\"])();\n                _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].emit('showmenu');\n            },\n        });\n        backButton.render();\n    }\n\n    createGame() {\n        const mode = _game_GameModes_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].OFFLINE;\n        this.game = new _game_Game_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"](mode, this.canvas);\n        this.game.start();\n    }\n\n    destroy() {\n        this.game.destroy();\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/views/GameView.js?");

/***/ }),

/***/ "./public/app/views/Login.js":
/*!***********************************!*\
  !*** ./public/app/views/Login.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return LoginView; });\n/* harmony import */ var _Base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base.js */ \"./public/app/views/Base.js\");\n/* harmony import */ var _components_Section_Section_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/Section/Section.mjs */ \"./public/app/components/Section/Section.mjs\");\n/* harmony import */ var _components_Form_Form_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/Form/Form.mjs */ \"./public/app/components/Form/Form.mjs\");\n/* harmony import */ var _components_Link_Link_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/Link/Link.mjs */ \"./public/app/components/Link/Link.mjs\");\n/* harmony import */ var _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../modules/EventBus.js */ \"./public/app/modules/EventBus.js\");\n\n\n\n\n\n\n\n\nclass LoginView extends _Base_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor(el) {\n        super(el);\n\n        this.form = null;\n\n        this.error = null;\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].on('session:login-err', this.setError.bind(this) );\n    }\n\n    setError(err) {\n        this.error = err;\n        this.form.showErrors(this.error.errors);\n    }\n\n    render() {\n        super.render();\n        const content = this._el.querySelector('.content');\n\n        const loginSection = new _components_Section_Section_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({ el: content, name: 'login' });\n        loginSection.render();\n        const loginSectionContent = loginSection.sectionContent;\n\n        this.renderForm(loginSectionContent);\n\n        const signUpLink = new _components_Link_Link_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n            el: loginSection.sectionContent,\n            text: 'Зарегистрироваться',\n            href: '/signup',\n            className: 'sub_link',\n        });\n        signUpLink.render();\n    }\n\n    fetchLogin(formData) {\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].emit('fetch-login', formData);\n    }\n\n    renderForm(parent) {\n        this.form = new _components_Form_Form_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n            el: parent,\n            inputs: this.inputs,\n            header: 'Войти!',\n            name: 'login',\n        });\n\n        this.form.render();\n\n        this.form.on({\n            event: 'submit',\n            callback: (event) => {\n                event.preventDefault();\n\n                this.form.hideErrors();\n\n                const formData = this.form.innerElem.elements;\n                this.fetchLogin(formData);\n            },\n        });\n    }\n\n    get inputs() {\n        return [\n            {\n                name: 'email',\n                type: 'email',\n                placeholder: 'Почта',\n                className: 'bordered_input',\n            },\n            {\n                name: 'password',\n                type: 'password',\n                placeholder: 'Пароль',\n                className: 'bordered_input',\n            },\n            {\n                name: 'submit',\n                type: 'submit',\n                className: 'cute-btn cute-btn--w10rem',\n                value: 'Войти',\n            },\n        ];\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/views/Login.js?");

/***/ }),

/***/ "./public/app/views/Logout.js":
/*!************************************!*\
  !*** ./public/app/views/Logout.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return LogoutView; });\n/* harmony import */ var _Base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base.js */ \"./public/app/views/Base.js\");\n/* harmony import */ var _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../modules/EventBus.js */ \"./public/app/modules/EventBus.js\");\n/* harmony import */ var _components_Loader_Loader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/Loader/Loader.js */ \"./public/app/components/Loader/Loader.js\");\n/* harmony import */ var _components_Error_Error_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/Error/Error.mjs */ \"./public/app/components/Error/Error.mjs\");\n\n\n\n\n\nclass LogoutView extends _Base_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    render() {\n        super.render();\n        const content = this._el.querySelector('.content');\n\n        if (navigator.onLine) {\n            this.renderLoading(content);\n        } else {\n            this.renderError(content);\n        }\n\n\n        this.fetchLogout();\n    }\n\n    fetchLogout() {\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].emit('fetch-logout');\n    }\n\n    renderLoading(parent) {\n        const loader = new _components_Loader_Loader_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](parent);\n        loader.render();\n    }\n\n    renderError(parent) {\n        const errorBlock = new _components_Error_Error_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n            el: parent,\n            error: 'Сейчас нельзя выйти!',\n        });\n\n        errorBlock.render();\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/views/Logout.js?");

/***/ }),

/***/ "./public/app/views/Menu.js":
/*!**********************************!*\
  !*** ./public/app/views/Menu.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MenuView; });\n/* harmony import */ var _Base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base.js */ \"./public/app/views/Base.js\");\n/* harmony import */ var _modules_User_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../modules/User.mjs */ \"./public/app/modules/User.mjs\");\n/* harmony import */ var _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../modules/EventBus.js */ \"./public/app/modules/EventBus.js\");\n/* harmony import */ var _components_Menu_Menu_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/Menu/Menu.mjs */ \"./public/app/components/Menu/Menu.mjs\");\n/* harmony import */ var _components_Section_Section_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/Section/Section.mjs */ \"./public/app/components/Section/Section.mjs\");\n/* harmony import */ var _components_Loader_Loader_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/Loader/Loader.js */ \"./public/app/components/Loader/Loader.js\");\n\n\n\n\n\n\n\nclass MenuView extends _Base_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor(el) {\n        super(el);\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].on('user-state-set', this.render.bind(this) );\n    }\n\n    render() {\n        super.render();\n        const content = this._el.querySelector('.content');\n\n        const menuSection = new _components_Section_Section_mjs__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({ el: content, name: 'index' });\n        menuSection.render();\n        const menuContent = menuSection.sectionContent;\n\n        if (_modules_User_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isExist() ) {\n            this.renderMenu(menuContent);\n            this.setPlayBtn(menuContent);\n        } else {\n            this.renderLoading(menuContent);\n        }\n    }\n\n    setPlayBtn(parent) {\n        const playBtn = parent.querySelector('.cute-btn');\n        playBtn.classList.add('menu__play-button');\n        playBtn.animate([\n            { transform: 'scale(1)', filter: 'none' },\n            { transform: 'scale(1.02)', filter: 'saturate(1.2)' },\n        ], {\n            duration: 700, // миллисекунды\n            easing: 'ease-in-out', // 'linear', кривая Безье, и т.д.\n            delay: 30, // миллисекунды\n            iterations: Infinity, // или число\n            direction: 'alternate', // 'normal', 'reverse', и т.д.\n            fill: 'forwards', // 'backwards', 'both', 'none', 'auto'\n        });\n    }\n\n\n    renderMenu(parent) {\n        const menu = new _components_Menu_Menu_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n            el: parent,\n            titles: this.titles,\n        });\n        menu.render();\n    }\n\n    renderLoading(parent) {\n        this.loader = new _components_Loader_Loader_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"](parent);\n        this.loader.render();\n    }\n\n    get titles() {\n        const titles = new Map();\n        titles.set('pregame', 'Играть');\n        titles.set('profile', 'Профиль');\n        titles.set('scoreboard', 'Списки лидеров');\n        titles.set('about', 'Об игре');\n\n        if (_modules_User_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isAuth() ) {\n            titles.set('logout', 'Выход');\n        } else {\n            titles.set('login', 'Войти');\n        }\n\n        return titles;\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/views/Menu.js?");

/***/ }),

/***/ "./public/app/views/PreGame.js":
/*!*************************************!*\
  !*** ./public/app/views/PreGame.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return PreGameView; });\n/* harmony import */ var _Base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base.js */ \"./public/app/views/Base.js\");\n/* harmony import */ var _components_Section_Section_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/Section/Section.mjs */ \"./public/app/components/Section/Section.mjs\");\n/* harmony import */ var _components_Button_Button_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/Button/Button.mjs */ \"./public/app/components/Button/Button.mjs\");\n/* harmony import */ var _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../modules/EventBus.js */ \"./public/app/modules/EventBus.js\");\n/* harmony import */ var _modules_fullscreenAPI_fullscreen_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../modules/fullscreenAPI/fullscreen.js */ \"./public/app/modules/fullscreenAPI/fullscreen.js\");\n\n\n\n\n\n\nclass PreGameView extends _Base_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]{\n    render() {\n        super.render();\n        const content = this._el.querySelector('.content');\n        const section = new _components_Section_Section_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({ el: content, name: 'pregame' });\n        section.render();\n        const title = this._el.querySelector('.game_title');\n        content.removeChild(title);\n        section.sectionContent.insertAdjacentHTML('beforeend', `\n            <div class=\"pre-game\">\n                <div class=\"pre-game__rules\">\n                     <h1>Обучение</h1>\n                    В игре есть список покупок.<br>\n                    Вам надо ловить продукты из списка покупок, <br>\n                    передвигая героя при помощи клавиш-стрелок или при помощи наклонов смартфона.<br>\n                    Прыжок: пробел или касание экрана.<br>\n                    За продукты из списка вы получите <b>+3</b> очка.<br>\n                    За ловлю других штраф <b>-1</b> очко.<br>\n                    Время ограничено!<br>\n                    Удачи :)<br>\n                </div>\n            </div>\n        `);\n        const preGameEl = section.sectionContent.querySelector('.pre-game');\n        const backButton = new _components_Button_Button_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({ el: preGameEl, className: 'cute-btn pre-game__back-button' });\n        backButton.render();\n        const playButton = new _components_Button_Button_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({ el: preGameEl, text: 'Начать игру', href: 'play' });\n        playButton.render();\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/views/PreGame.js?");

/***/ }),

/***/ "./public/app/views/Profile.js":
/*!*************************************!*\
  !*** ./public/app/views/Profile.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ProfileView; });\n/* harmony import */ var _Base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base.js */ \"./public/app/views/Base.js\");\n/* harmony import */ var _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../modules/EventBus.js */ \"./public/app/modules/EventBus.js\");\n/* harmony import */ var _components_Profile_Profile_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/Profile/Profile.mjs */ \"./public/app/components/Profile/Profile.mjs\");\n/* harmony import */ var _components_Section_Section_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/Section/Section.mjs */ \"./public/app/components/Section/Section.mjs\");\n/* harmony import */ var _components_Error_Error_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/Error/Error.mjs */ \"./public/app/components/Error/Error.mjs\");\n/* harmony import */ var _components_Button_Button_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/Button/Button.mjs */ \"./public/app/components/Button/Button.mjs\");\n/* harmony import */ var _components_Loader_Loader_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/Loader/Loader.js */ \"./public/app/components/Loader/Loader.js\");\n\n\n\n\n\n\n\n\n\nclass ProfileView extends _Base_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor(el) {\n        super(el);\n\n        this.user = null;\n        this.error = null;\n\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].on('user:get-profile', this.setUser.bind(this) );\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].on('user:get-profile-err', this.setError.bind(this) );\n    }\n\n    show() {\n        super.show();\n        this.fetchUser();\n    }\n\n    hide() {\n        super.hide();\n        this.user = null;\n    }\n\n    fetchUser() {\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].emit('fetch-user');\n    }\n\n    setUser(user) {\n        this.user = user;\n        this.render();\n    }\n\n    setError(err) {\n        this.user = null;\n        this.error = err;\n        this.render();\n    }\n\n    render() {\n        super.render();\n        const content = this._el.querySelector('.content');\n\n        const profileSection = new _components_Section_Section_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({ el: content, name: 'profile' });\n        profileSection.render();\n        const profileSectionContent = profileSection.sectionContent;\n\n        const changingBlock = document.createElement('div');\n        profileSectionContent.appendChild(changingBlock);\n\n        const menuButton = new _components_Button_Button_mjs__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({ el: profileSectionContent });\n        menuButton.render();\n\n        if (!this.user && !this.error) {\n            this.renderLoading(changingBlock);\n        } else if (this.error) {\n            this.renderError(profileSectionContent);\n            this.error = null;\n        } else {\n            this.renderProfile(changingBlock);\n        }\n    }\n\n    renderLoading(parent) {\n        const loader = new _components_Loader_Loader_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"](parent);\n        loader.render();\n    }\n\n    renderError(parent) {\n        let path = '/';\n        if (this.error.status === 401) {\n            path = '/login';\n        }\n        const errorBlock = new _components_Error_Error_mjs__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n            el: parent,\n            path: path,\n            error: this.error.text,\n        });\n\n        errorBlock.render();\n    }\n\n    renderProfile(parent) {\n        const profileData = this.user;\n        const profile = new _components_Profile_Profile_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n            el: parent,\n            data: profileData,\n        });\n\n        profile.render();\n\n        const editProfileButton = new _components_Button_Button_mjs__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({\n            el: parent,\n            href: '/profile/settings',\n            text: 'Редактировать',\n        });\n        editProfileButton.render();\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/views/Profile.js?");

/***/ }),

/***/ "./public/app/views/Scoreboard.js":
/*!****************************************!*\
  !*** ./public/app/views/Scoreboard.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ScoreboardView; });\n/* harmony import */ var _Base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base.js */ \"./public/app/views/Base.js\");\n/* harmony import */ var _components_Button_Button_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/Button/Button.mjs */ \"./public/app/components/Button/Button.mjs\");\n/* harmony import */ var _components_Loader_Loader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/Loader/Loader.js */ \"./public/app/components/Loader/Loader.js\");\n/* harmony import */ var _components_Section_Section_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/Section/Section.mjs */ \"./public/app/components/Section/Section.mjs\");\n/* harmony import */ var _components_Scoreboard_Scoreboard_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/Scoreboard/Scoreboard.mjs */ \"./public/app/components/Scoreboard/Scoreboard.mjs\");\n/* harmony import */ var _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../modules/EventBus.js */ \"./public/app/modules/EventBus.js\");\n\n\n\n\n\n\n\n\n\n\nclass ScoreboardView extends _Base_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor(el) {\n        super(el);\n\n        this.dataScoreboard = null;\n\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].on('scoreboard:get-data', this.setData.bind(this) );\n    }\n\n    render() {\n        super.render();\n        const content = this._el.querySelector('.content');\n\n        const scoreboardSection = new _components_Section_Section_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({ el: content, name: 'scoreboard' });\n        scoreboardSection.render();\n        const scoreboardSectionContent = scoreboardSection.sectionContent;\n\n        const changingBlock = document.createElement('div');\n        scoreboardSectionContent.appendChild(changingBlock);\n\n        if (!this.dataScoreboard) {\n            this.renderLoading(changingBlock);\n        } else {\n            this.renderScoreboard(changingBlock);\n        }\n\n        const menuButton = new _components_Button_Button_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({ el: scoreboardSectionContent });\n        menuButton.render();\n    }\n\n\n    fetchData() {\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].emit('fetch-scoreboard');\n    }\n\n    setData(data) {\n        this.dataScoreboard = data;\n        this.render();\n    }\n\n    show() {\n        super.show();\n        this.fetchData();\n    }\n\n    renderLoading(parent) {\n        const loader = new _components_Loader_Loader_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](parent);\n        loader.render();\n    }\n\n    renderScoreboard(parent) {\n        const { players, total } = this.dataScoreboard;\n        const scoreboard = new _components_Scoreboard_Scoreboard_mjs__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n            el: parent,\n            data: players,\n            total: total,\n        });\n        scoreboard.render();\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/views/Scoreboard.js?");

/***/ }),

/***/ "./public/app/views/SignUp.js":
/*!************************************!*\
  !*** ./public/app/views/SignUp.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SignUpView; });\n/* harmony import */ var _Base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base.js */ \"./public/app/views/Base.js\");\n/* harmony import */ var _components_Section_Section_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/Section/Section.mjs */ \"./public/app/components/Section/Section.mjs\");\n/* harmony import */ var _components_Form_Form_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/Form/Form.mjs */ \"./public/app/components/Form/Form.mjs\");\n/* harmony import */ var _components_Link_Link_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/Link/Link.mjs */ \"./public/app/components/Link/Link.mjs\");\n/* harmony import */ var _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../modules/EventBus.js */ \"./public/app/modules/EventBus.js\");\n\n\n\n\n\n\n\n\nclass SignUpView extends _Base_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor(el) {\n        super(el);\n\n        this.form = null;\n\n        this.error = null;\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].on('user:signup-err', this.setError.bind(this) );\n    }\n\n    setError(err) {\n        this.error = err;\n        this.form.showErrors(this.error.errors);\n    }\n\n    render() {\n        super.render();\n        const content = this._el.querySelector('.content');\n\n        const signupSection = new _components_Section_Section_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({ el: content, name: 'signup' });\n        signupSection.render();\n        const signupSectionContent = signupSection.sectionContent;\n\n        this.renderForm(signupSectionContent);\n\n        const loginLink = new _components_Link_Link_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n            el: signupSection.sectionContent,\n            text: 'У меня уже есть аккаунт',\n            href: '/login',\n            className: 'sub_link',\n        });\n        loginLink.render();\n    }\n\n    fetchSignUp(formData) {\n        _modules_EventBus_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].emit('fetch-signup-user', formData);\n    }\n\n    renderForm(parent) {\n        this.form = new _components_Form_Form_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n            el: parent,\n            inputs: this.inputs,\n            header: 'Зарегистрироваться!',\n            name: 'signup',\n        });\n        this.form.render();\n\n        this.form.on({\n            event: 'submit',\n            callback: (event) => {\n                event.preventDefault();\n\n                this.form.hideErrors();\n\n                const formData = this.form.innerElem.elements;\n                this.fetchSignUp(formData);\n            },\n        });\n    }\n\n    get inputs() {\n        return [\n            {\n                name: 'nickname',\n                type: 'text',\n                placeholder: 'Логин',\n                className: 'bordered_input',\n            },\n            {\n                name: 'email',\n                type: 'email',\n                placeholder: 'Email',\n                className: 'bordered_input',\n            },\n            {\n                name: 'password',\n                type: 'password',\n                placeholder: 'Пароль',\n                className: 'bordered_input',\n            },\n            {\n                name: 'password_repeat',\n                type: 'password',\n                placeholder: 'Повторите пароль',\n                className: 'bordered_input',\n            },\n            {\n                name: 'submit',\n                type: 'submit',\n                className: 'cute-btn cute-btn--w10rem',\n                value: 'Зарегистрироваться',\n            },\n        ];\n    }\n}\n\n\n//# sourceURL=webpack:///./public/app/views/SignUp.js?");

/***/ }),

/***/ "./public/app/views/View.js":
/*!**********************************!*\
  !*** ./public/app/views/View.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return View; });\n/*\n* @class View - каркас для создания любой view\n* @module modules\n*/\nclass View {\n    constructor(el) {\n        this._el = el;\n        this._created = false;\n\n        this._el.dataset.view = this.constructor.name;\n        this._el.hidden = true;\n    }\n\n    get isActive() {\n        return !this._el.hidden;\n    }\n\n    hide() {\n        this._el.hidden = true;\n    }\n\n    show() {\n        // this._el.hidden = false;\n        // if (!this._created) {\n        //     this._created = true;\n        //     this.render();\n        // }\n        this._el.hidden = false;\n        this.render();\n    }\n\n    render() {}\n}\n\n\n//# sourceURL=webpack:///./public/app/views/View.js?");

/***/ })

/******/ });